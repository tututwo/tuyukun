import{S as nr,i as sr,s as vt,k as fe,q as lr,C as qr,l as ce,m as he,h as N,r as ar,D as Fr,n as Le,E as le,F as Ne,G as Hr,H as Xr,I as Vr,a as nt,c as st,b as te,d as Me,f as Zr,g as ze,J as Gr,y as Yr,z as Kr,A as Jr,K as Qr,L as ei,M as ti,N as ri,O as ii,P as ni,B as si,v as li}from"../chunks/index.457ef75c.js";import{p as ai}from"../chunks/stores.b59c4859.js";import"../chunks/functions.93e96281.js";const ui=({url:e})=>({currentRoute:e.pathname}),ys=Object.freeze(Object.defineProperty({__proto__:null,load:ui},Symbol.toStringTag,{value:"Module"}));const oi=[":",";",",","(",")","[","]","{","}","π","±","+","-","*","/","%",'"',"'","`","@","=","^"],v={escape:e=>e=="\\",space:e=>/[\r\n\t\s]/.test(e),digit:e=>/^[0-9]$/.test(e),sign:e=>/^[+-]$/.test(e),dot:e=>e==".",quote:e=>/^["'`]$/.test(e),symbol:e=>oi.includes(e),hexNum:e=>/^[0-9a-f]$/i.test(e),hex:(e,r,t)=>e=="0"&&v.letter(r,"x")&&v.hexNum(t),expWithSign:(e,r,t)=>v.letter(e,"e")&&v.sign(r)&&v.digit(t),exp:(e,r)=>v.letter(e,"e")&&v.digit(r),dots:(e,r)=>v.dot(e)&&v.dot(r),letter:(e,r)=>String(e).toLowerCase()==String(r).toLowerCase(),comment:(e,r)=>e=="/"&&r=="*",inlineComment:(e,r)=>e=="/"&&r==="/",selfClosedTag:(e,r)=>e=="/"&&r==">",closedTag:(e,r)=>e=="<"&&r=="/"};class U{constructor({type:r,value:t,pos:i,status:n}){this.type=r,this.value=t,this.pos=i,n&&(this.status=n)}isSymbol(...r){let t=this.type=="Symbol";return r.length?r.some(i=>i===this.value):t}isSpace(){return this.type=="Space"}isNumber(){return this.type=="Number"}isWord(){return this.type=="Word"}}function L(e){let r=-1,t=e.length,i=-1,n=0;return{curr(s=0){return e[r+s]},next(s=1){let l=e[r+=s];return l===`
`?(n++,i=0):i+=s,l},end(){return r>=t},get(){return{prev:e[r-1],curr:e[r+0],next:e[r+1],next2:e[r+2],next3:e[r+3],pos:[i,n]}}}}function fi(e){for(;e.next();){let{curr:r,prev:t}=e.get();if(v.comment(r,t))break}}function ci(e){for(;e.next()&&e.curr()!==`
`;);}function Et(e){return[":",";",",","{","}","(",")","[","]"].includes(e)}function At(e){let r="";for(;!e.end();){let{curr:t,next:i}=e.get();r+=t;let n=v.symbol(i)||v.space(i)||v.digit(i);if(r.length&&n&&!v.closedTag(t,i))break;e.next()}return r.trim()}function hi(e){let r="";for(;!e.end();){let{curr:t,next:i}=e.get();if(r+=t,!v.space(i))break;e.next()}return r}function Nt(e){let r="",t=!1;for(;!e.end();){let{curr:i,next:n,next2:s,next3:l}=e.get();if(r+=i,t&&v.dot(n)||(v.dot(i)&&(t=!0),v.dots(n,s)))break;if(v.expWithSign(n,s,l))r+=e.next()+e.next();else if(v.exp(n,s))r+=e.next();else if(!v.digit(n)&&!v.dot(n))break;e.next()}return r}function mi(e){let r="0x";for(e.next(2);!e.end();){let{curr:t,next:i}=e.get();if(r+=t,!v.hexNum(i))break;e.next()}return r}function ve(e){return e[e.length-1]}function B(e,r={}){let t=L(String(e).trim()),i=[],n=[];for(;t.next();){let{prev:l,curr:a,next:u,next2:o,pos:f}=t.get();if(v.comment(a,u))fi(t);else if(r.ignoreInlineComment&&v.inlineComment(a,u))ci(t);else if(v.hex(a,u,o)){let c=mi(t);i.push(new U({type:"Number",value:c,pos:f}))}else if(v.digit(a)||v.digit(u)&&v.dot(a)&&!v.dots(l,a)){let c=Nt(t);i.push(new U({type:"Number",value:c,pos:f}))}else if(v.symbol(a)&&!v.selfClosedTag(a,u)){let c=ve(i),h=v.digit(u)||v.dot(u)&&v.digit(o);if(a==="-"&&h&&(!c||!c.isNumber())){let p=Nt(t);i.push(new U({type:"Number",value:p,pos:f}));continue}let m={type:"Symbol",value:a,pos:f};if(n.length&&v.escape(c.value)){i.pop();let p=At(t);p.length&&i.push(new U({type:"Word",value:p,pos:f}))}else v.quote(a)&&(ve(n)==a?(n.pop(),m.status="close"):(n.push(a),m.status="open")),i.push(new U(m))}else if(v.space(a)){let c=hi(t),h=ve(i),{next:m}=t.get();if(!n.length&&h){let p=h.value,d=Et(p)&&p!==")",_=Et(m)&&m!=="(";if(d||_)continue;c=r.preserveLineBreak?a:" "}i.length&&m&&m.trim()&&i.push(new U({type:"Space",value:c,pos:f}))}else{let c=At(t);c.length&&i.push(new U({type:"Word",value:c,pos:f}))}}let s=ve(i);return s&&s.isSpace()&&(i.length=i.length-1),i}function pi(e){let r=L(B(e));return ur(r)}function ur(e){let r=[];for(;e.next();){let{curr:t,next:i}=e.get();if(t.value==="var"){if(i&&i.isSymbol("(")){e.next();let n=di(e);gi(n.name)&&r.push(n)}}else if(r.length&&!t.isSymbol(","))break}return r}function di(e){let r={},t=[];for(;e.next();){let{curr:i,next:n}=e.get();if(i.isSymbol(")",";")&&!r.name){r.name=Pt(t);break}else i.isSymbol(",")?(r.name===void 0&&(r.name=Pt(t),t=[]),r.name&&(r.fallback=ur(e))):t.push(i)}return r}function Pt(e){return e.map(r=>r.value).join("")}function gi(e){return!(e===void 0||e.length<=2||e.substr(2).startsWith("-")||!e.startsWith("--"))}function C(e,r,t){return e=Number(e)||0,Math.max(r,Math.min(t,e))}function _i(e,r){return e?typeof r=="function"?r():r:""}function yi(e,r,t){let i=0,n=e,s=u=>u>0&&u<1?.1:1,l=arguments.length;l==1&&([e,r]=[s(e),e]),l<3&&(t=s(e));let a=[];for(;(t>=0&&e<=r||t<0&&e>r)&&(a.push(e),e+=t,!(i++>=65535)););return a.length||a.push(n),a}function or(e,r){for(let[t,i]of Object.entries(r))e[t]=e[i];return e}function He(e){return/^[a-zA-Z]$/.test(e)}function b(e){return e==null}function ae(e){return b(e)||Number.isNaN(e)}function M(e){return b(e)||e===""}function re(e){let r=t=>(...i)=>e(t,...i);return r.lazy=!0,r}function vi(e,r){let[t,i=1]=String(e).split(/[x-]/),[n,s]=[Math.ceil(t),Math.ceil(i)];ae(n)&&(n=1),ae(s)&&(s=1),t=C(n,0,65536),i=C(s,0,65536);let l=t*i,a=[],u=1;if(/x/.test(e))for(let o=1;o<=i;++o)for(let f=1;f<=t;++f)a.push(r(u++,f,o,l,t,i,u));else if(/-/.test(e))if(l=Math.abs(t-i)+1,t<=i)for(let o=t;o<=i;++o)a.push(r(o,o,1,l,l,1,u++));else for(let o=t;o>=i;--o)a.push(r(o,o,1,l,l,1,u++));else for(let o=1;o<=t;++o)a.push(r(o,o,1,t,t,1,u++));return a}function ue(e,r,t){return"c-"+e+"-"+r+"-"+t}function S(e){let r=e;for(;r&&!b(r.value);)r=r.value;return b(r)?"":r}function bi(e){return(b(e)?Date.now():String(e).replace(/\/.png$/g,""))+".png"}function fr(e,r,t=0){let i=new Image;i.crossOrigin="anonymous",i.src=e,i.onload=function(){setTimeout(r,t)}}function lt(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function at(e){let r=document.createElement("textarea");return r.innerHTML=e,r.value}function xi(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function ut(e,r=0){let t=3735928559^r,i=1103547991^r;for(let n=0,s;n<e.length;n++)s=e.charCodeAt(n),t=Math.imul(t^s,2654435761),i=Math.imul(i^s,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&i)+(t>>>0)}function wi(e){let r=t=>b(t)?"":t;return(t,...i)=>{let n=$i(t).reduce((s,l,a)=>s+l+r(i[a]),"");return e(n)}}function cr(){let e=0;return(r="")=>`${r}-${++e}`}function I(e,r,t){return r+e*(t-r)}function ie(e=""){return e+Math.random().toString(32).substr(2)}function $i(e){return b(e)?[]:Array.isArray(e)?e:[e]}function hr(e){let[r,t=r]=(e+"").replace(/\s+/g,"").replace(/[,，xX]+/g,"x").split("x").map(i=>parseInt(i));return(!r||r<1)&&(r=1),(!t||t<1)&&(t=1),{x:r,y:t}}function A(e,r={symbol:",",noSpace:!1,verbose:!1}){let t=[],i=[],n=[],s=[],l="";if(M(e))return t;let a=L(B(e));function u(f){let c=r.symbol||[","];return Array.isArray(c)||(c=[c]),r.noSpace?f.isSymbol(...c):f.isSymbol(...c)||f.isSpace()}function o(f){let c=Si(f);r.verbose?(l.length||c.length)&&t.push({group:l,value:c}):t.push(c)}for(;a.next();){let{prev:f,curr:c,next:h}=a.get();c.isSymbol("(")&&n.push(c.value),c.isSymbol(")")&&n.pop(),c.status==="open"&&s.push(c.value),c.status==="close"&&s.pop();let m=!n.length&&!s.length;if(m){let p=r.noSpace&&c.isSpace()&&u(h),d=r.noSpace&&c.isSpace()&&u(f);if(p||d)continue}m&&u(c)?(o(i),l=c.value,i=[]):i.push(c)}return i.length&&o(i),t}function Si(e){return e.map(r=>r.value).join("")}function ki(e,r){let t=[],i,n=[],s=[];for(;e.next();){let{curr:l,next:a}=e.get();l.isSymbol("(")&&!n.length?s.push(l):l.isSymbol(")")&&!n.length&&s.pop(),l.isSymbol("'",'"')&&(l.status==="open"?n.push(l):n.pop());let u=!n.length&&!s.length&&(!a||l.isSymbol(";")||a.isSymbol("}"));if(l.isSymbol("'",'"')&&a&&a.isSymbol("}")&&!n.length&&(u=!0),!s.length&&!n.length&&l.isSymbol("{")){let o=mr(t);if(!o.length)continue;let f=o.pop(),c=ot(...o,f);for(i=Ie(bt(e,Oe(f,{type:"block",inline:!0,name:f,value:[]})),c);f=o.pop();)i=Ie(Oe(f,{type:"block",name:f,value:[i]}),c);break}if(t.push(l),u)break}return t.length&&!i?(r._valueTokens=t,r.value=me(t)):i&&(r.value=i),r.origin&&(r.origin.value=r.value),r}function ji(e){let r=[],t=[];for(;e.next();){let{curr:i}=e.get();if(i.isSymbol("{"))r.push(i.value);else if(i.isSymbol("}"))if(r.length)r.pop();else break;t.push(i.value)}return t.join("")}function bt(e,r){let t=[],i=[],n=r&&r.type||"",s=[];for(;e.next();){let{prev:l,curr:a,next:u}=e.get();a.isSymbol("(")&&s.push(a.value),a.isSymbol(")")&&s.pop();let o=!u||a.isSymbol("}");if(Xe(n)&&o){!u&&t.length&&!a.isSymbol("}")&&typeof t[t.length-1].value=="string"&&(t[t.length-1].value+=";"+a.value),r.value=t;break}else if(a.isSymbol("{")){let f=mr(i);if(!f.length)continue;ot(r.name)&&(f=[me(i)]);let c=f.pop(),h=ot(...f,r.name,c);if(c==="style")t.push({type:"block",name:c,value:ji(e)});else{let m=Ie(bt(e,Oe(c,{type:"block",name:c,value:[]})),h);for(;c=f.pop();)m=Ie(Oe(c,{type:"block",name:c,value:[m]}),h);t.push(m)}i=[]}else if(a.isSymbol(":")&&!s.length&&!Ti(l,u)&&i.length){let f=Ei(i,d=>d.isSymbol(",")),c={type:"statement",name:"unkown",value:""};f.length>1&&(c.origin={name:f});let h=ki(e,c),m=A(h.value),p=f.length>1&&m.length===f.length;f.forEach((d,_)=>{let y=Object.assign({},h,{name:d});/^\-\-/.test(d)&&(y.variable=!0),p&&(y.value=m[_]),/viewBox/i.test(d)&&(y.detail=Ai(y.value,y._valueTokens)),delete y._valueTokens,t.push(y)}),Xe(n)&&(r.value=t),i=[]}else a.isSymbol(";")?t.length&&i.length&&(t[t.length-1].value+=";"+me(i),i=[]):i.push(a)}return t.length&&Xe(n)&&(r.value=t),n?r:t}function Ti(e,r){const t=["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"];let i=e&&e.value,n=r&&r.value;return t.includes(i+":"+n)}function me(e){return e.filter((r,t)=>!(r.isSymbol(";","}")&&t===e.length-1)).map(r=>r.value).join("")}function Ie(e,r){let t=e.name||"",[i,...n]=t.split(/#/),s=n[n.length-1];return i&&s&&!r&&(e.name=i,e.value.push({type:"statement",name:"id",value:s})),e}function Ei(e,r){let t=[],i=[];return e.forEach(n=>{r(n)?(t.push(me(i)),i=[]):i.push(n)}),i.length&&t.push(me(i)),t}function mr(e){let r=[],t=L(e),i;for(;t.next();){let{prev:n,curr:s,next:l}=t.get(),a=n&&l&&s.value==="x"&&n.isNumber()&&l.isNumber();s.isWord()&&!i&&!a?r.push(s.value.trim()):r[r.length-1]=(r[r.length-1]+s.value).trim(),s.isSymbol()?i=!0:s.isSpace()||(i=!1)}return r}function Ai(e,r){const t={value:[]};let i;if(!Array.isArray(r))return t;for(let n of r)n.isSpace()||n.isSymbol(",",";")||(t.value.length<4&&n.isNumber()?t.value.push(Number(n.value)):n.isNumber()&&i?(t[i]=Number(n.value),i=null):n.isWord()&&(i=n.value));return t}function Oe(e,r){let t=Object.assign({},r);if(/\*\s*[0-9]/.test(e)){let[i,n]=e.split("*");n&&(t.times=n.trim(),t.pureName=i.trim())}return t}function ot(...e){return e.some(r=>r==="style")}function Xe(e){return e==="block"}function Ni(e){let r,t=[];for(let i of e.value)i.name==="svg"&&(r=i),i.variable&&t.push(i);return r?(r.value.push(...t),r):e}function ne(e,r){let t=L(B(e)),i=bt(t,r||{type:"block",name:"svg",value:[]});return Ni(i)}function ft(e,r){let t="";if(e.type==="block"){let i=Array.isArray(e.value)&&e.value[0]&&e.value[0].inline;if(e.times?t+="@M"+e.times+"("+e.pureName+"{":t+=e.name+(i?" ":"{"),e.name==="style")t+=e.value;else if(Array.isArray(e.value)&&e.value.length){let n="";for(let s of e.value)t+=ft(s,n),s.origin&&(n=s.origin.name.join(","))}e.times?t+="})":i||(t+="}")}else if(e.type==="statement"){let i=e.origin&&r===e.origin.name.join(","),n=e.origin?e.origin.name.join(","):e.name,s=e.origin?e.origin.value:e.value;i||(t+=s&&s.type?n+":"+ft(s):n+":"+s+";")}return t}function Pi(e){return ft(e).trim()}function be(e){return b(e)?[]:Array.isArray(e)?e:[e]}function xe(e,r=`
`){return(e||[]).join(r)}function w(e,r=1){return b(e)?"":e[e.length-r]}function Rt(e){return e[0]}function Ri(e){return typeof structuredClone<"u"?structuredClone(e):JSON.parse(JSON.stringify(e))}function Ci(e){return[].concat(e,e)}function pr(e,r){return Array.prototype.flatMap?e.flatMap(r):e.reduce((t,i)=>t.concat(r(i)),[])}function Li(e){return e.filter(r=>!b(r)&&String(r).trim().length)}const P={func(e=""){return{type:"func",name:e,arguments:[]}},argument(){return{type:"argument",value:[]}},text(e=""){return{type:"text",value:e}},pseudo(e=""){return{type:"pseudo",selector:e,styles:[]}},cond(e=""){return{type:"cond",name:e,styles:[],arguments:[]}},rule(e=""){return{type:"rule",property:e,value:[]}},keyframes(e=""){return{type:"keyframes",name:e,steps:[]}},step(e=""){return{type:"step",name:e,styles:[]}}},j={white_space(e){return/[\s\n\t]/.test(e)},line_break(e){return/\n/.test(e)},number(e){return!isNaN(e)},pair(e){return['"',"(",")","'"].includes(e)},pair_of(e,r){return{'"':'"',"'":"'","(":")"}[e]==r}},Be={π:Math.PI,"∏":Math.PI};function Ct(e){return/^@(canvas|shaders|doodle)/.test(e)}function dr(e=""){let r=0,t=1,i=1;return{curr(n=0){return e[r+n]},end(){return e.length<=r},info(){return{index:r,col:t,line:i}},index(n){return n===void 0?r:r=n},range(n,s){return e.substring(n,s)},next(){let n=e[r++];return n==`
`?(i++,t=0):t++,n}}}function Mi(e,{col:r,line:t}){console.warn(`(at line ${t}, column ${r}) ${e}`)}function zi(e){return e.trim().length?j.number(+e)?+e:e.trim():e}function xt(e){return function(r,t){let i=r.index(),n="";for(;!r.end();){let s=r.next();if(e(s))break;n+=s}return t&&r.index(i),n}}function gr(e,r){return xt(i=>/[^\w@]/.test(i))(e,r)}function Ii(e){return xt(r=>/[\s\{]/.test(r))(e)}function _r(e,r){return xt(i=>j.line_break(i)||i=="{")(e,r)}function Oi(e,r){let t,i=P.step();for(;!e.end()&&(t=e.curr())!="}";){if(j.white_space(t)){e.next();continue}else if(!i.name.length)i.name=br(e);else if(i.styles.push(Fe(e,r)),e.curr()=="}")break;e.next()}return i}function Bi(e,r){const t=[];let i;for(;!e.end()&&(i=e.curr())!="}";){if(j.white_space(i)){e.next();continue}else t.push(Oi(e,r));e.next()}return t}function Wi(e,r){let t=P.keyframes(),i;for(;!e.end()&&(i=e.curr())!="}";){if(t.name.length){if(i=="{"||e.curr(-1)=="{"){e.next(),t.steps=Bi(e,r);break}}else{if(gr(e),t.name=Ii(e),!t.name.length){Mi("missing keyframes name",e.info());break}continue}e.next()}return t}function qe(e,r={}){for(e.next();!e.end();){let t=e.curr();if(r.inline){if(t==`
`)break}else if((t=e.curr())=="*"&&e.curr(1)=="/")break;e.next()}r.inline||(e.next(),e.next())}function Di(e){for(e.next();!e.end()&&e.curr()!=">";)e.next()}function Ui(e){let r="",t;for(;!e.end()&&(t=e.curr())!=":";)j.white_space(t)||(r+=t),e.next();return r}function ct(e,r,t){let i=[],n=[],s=[],l="",a,u="";for(;!e.end();){a=e.curr();let o=e.curr(-1),f=e.index();if(/[\('"`]/.test(a)&&o!=="\\")s.length&&a!=="("&&a===w(s)?s.pop():s.push(a),l+=a;else if((a=="@"||o==="."&&r)&&!t)n.length||(l=l.trimLeft()),l.length&&(n.push(P.text(l)),l=""),n.push(yr(e));else if(t&&/[)]/.test(a)||!t&&/[,)]/.test(a))if(s.length)a==")"&&w(s)==="("&&s.pop(),l+=a;else{if(l.length&&(n.length?/\S/.test(l)&&n.push(P.text(l)):n.push(P.text(zi(l))),l.startsWith("±")&&!t)){let c=l.substr(1),h=Ri(n);w(h).value="-"+c,i.push(Ve(h)),w(n).value=c}if(i.push(Ve(n)),[n,l]=[[],""],a==")")break}else Be[a]&&!/[0-9]/.test(e.curr(-1))&&(a=Be[a]),l+=a;if(r&&(e.curr(1)==")"||e.curr(1)==";"||!/[0-9a-zA-Z_\-.]/.test(e.curr()))&&!s.length){n.length&&i.push(Ve(n));break}else u+=e.range(f,e.index()+1),e.next()}return[qi(i),u]}function qi(e){let r=w(e[0]);return r&&r.type==="text"&&!String(r.value).trim().length&&(e[0]=e[0].slice(0,-1)),e}function Ve(e){let r=e.map(n=>{if(n.type=="text"&&typeof n.value=="string"){let s=String(n.value);s.includes("`")&&(n.value=s=s.replace(/`/g,'"')),n.value=s}return n}),t=Rt(r)||{},i=w(r)||{};if(t.type=="text"&&i.type=="text"){let n=Rt(t.value),s=w(i.value);typeof t.value=="string"&&typeof i.value=="string"&&j.pair_of(n,s)&&(t.value=t.value.slice(1),i.value=i.value.slice(0,i.value.length-1),r.cluster=!0)}return r}function Fi(e){let r="",t="";if(/\D$/.test(e)&&!/\d+[x-]\d+/.test(e)||Math[e.substr(1)])return{fname:e,extra:t};for(let i=e.length-1;i>=0;i--){let n=e[i],s=e[i-1],l=e[i+1];if(/[\d.]/.test(n)||(n=="x"||n=="-")&&/\d/.test(s)&&/\d/.test(l))t=n+t;else{r=e.substring(0,i+1);break}}return{fname:r,extra:t}}function Hi(e){let r=JSON.stringify(e);return r.includes("pureName")&&r.includes("times")}function Xi(e){return/^@svg$/i.test(e)}function yr(e){let r=P.func(),t=e.curr(),i,n=!1;for(t==="@"?e.next():t="@";!e.end();){i=e.curr();let a=e.curr(1),u=i=="."&&(a=="@"||/[a-zA-Z]/.test(a));if(i=="("||u){n=!0,e.next();let[o,f]=ct(e,u,Ct(t));if(Xi(t)&&/\d\s*{/.test(f)){let c=ne(f);if(Hi(c)){let h=Pi(c);h+=")",o=ct(dr(h),u,Ct(t))[0]}}r.arguments=o;break}else/[0-9a-zA-Z_\-.]/.test(i)&&(t+=i);if(!n&&a!=="("&&!/[0-9a-zA-Z_\-.]/.test(a))break;e.next()}let{fname:s,extra:l}=Fi(t);return r.name=s,l.length&&r.arguments.unshift([{type:"text",value:l}]),r.position=e.info().index,r}function vr(e){let r=P.text(),t=0,i=!0,n;const s=[];s[t]=[];let l=[],a=[];for(;!e.end();){if(n=e.curr(),i&&j.white_space(n)){e.next();continue}else i=!1;if(n==`
`&&!j.white_space(e.curr(-1)))r.value+=" ";else if(n==","&&!l.length)r.value.length&&(s[t].push(r),r=P.text()),s[++t]=[],i=!0;else if(/[;}<]/.test(n)&&!a.length){r.value.length&&(s[t].push(r),r=P.text());break}else if(n=="@"&&/\w/.test(e.curr(1)))r.value.length&&(s[t].push(r),r=P.text()),s[t].push(yr(e));else if(n==='"'||n==="'"){let u=w(a);n===u?a.pop():a.length||a.push(n),r.value+=n}else(!j.white_space(n)||!j.white_space(e.curr(-1)))&&(n=="("&&l.push(n),n==")"&&l.pop(),Be[n]&&!/[0-9]/.test(e.curr(-1))&&(n=Be[n]),r.value+=n);if((e.curr()===";"||e.curr()=="}")&&!a.length)break;e.next()}return r.value.length&&s[t].push(r),s}function br(e){let r="",t;for(;!e.end()&&(t=e.curr())!="{";)j.white_space(t)||(r+=t),e.next();return r}function Vi(e){let r={name:"",arguments:[]},t;for(;!e.end();){if((t=e.curr())=="(")e.next(),r.arguments=ct(e)[0];else{if(/[){]/.test(t))break;j.white_space(t)||(r.name+=t)}e.next()}return r}function xr(e,r){let t=P.pseudo(),i;for(;!e.end();){if(i=e.curr(),i=="/"&&e.curr(1)=="*")qe(e);else{if(i=="}")break;if(j.white_space(i)){e.next();continue}else if(!t.selector)t.selector=br(e);else{let n=Fe(e,r);if(n.property=="@use"?t.styles=t.styles.concat(n.value):n.property&&t.styles.push(n),e.curr()=="}")break}}e.next()}return t}function Fe(e,r){let t=P.rule(),i,n=e.index();for(;!e.end();){if(i=e.curr(),i=="/"&&e.curr(1)=="*")qe(e);else{if(i==";")break;if(t.property.length){t.value=vr(e);break}else if(t.property=Ui(e),t.property=="@use"){t.value=Zi(e,r);break}}e.next()}let s=e.index();return t.raw=()=>e.range(n,s).trim(),t}function wr(e,r){let t=P.cond(),i;for(;!e.end();){if(i=e.curr(),i=="/"&&e.curr(1)=="*")qe(e);else{if(i=="}")break;if(!t.name.length)Object.assign(t,Vi(e));else if(i==":"){let n=xr(e);n.selector&&t.styles.push(n)}else if(i=="@"&&!_r(e,!0).includes(":"))t.styles.push(wr(e));else if(!j.white_space(i)){let n=Fe(e,r);if(n.property&&t.styles.push(n),e.curr()=="}")break}}e.next()}return t}function Lt(e,r){let t="";return e&&e.get_variable&&(t=e.get_variable(r)),t}function $r(e,r){e.forEach&&e.forEach(t=>{if(t.type=="text"&&t.value){let i=pi(t.value);t.value=i.reduce((n,s)=>{let l="",a="",u;l=Lt(r,s.name),!l&&s.fallback&&s.fallback.every(o=>{if(a=Lt(r,o.name),a)return l=a,!1});try{u=se(l,r)}catch{}return u&&n.push.apply(n,u),n},[])}t.type=="func"&&t.arguments&&t.arguments.forEach(i=>{$r(i,r)})})}function Zi(e,r){return e.next(),(vr(e)||[]).reduce((i,n)=>{$r(n,r);let[s]=n;return s.value&&s.value.length&&i.push(...s.value),i},[])}function se(e,r){const t=dr(e),i=[];for(;!t.end();){let n=t.curr();if(j.white_space(n)){t.next();continue}else if(n=="/"&&t.curr(1)=="*")qe(t);else if(n==":"){let s=xr(t,r);s.selector&&i.push(s)}else if(n=="@"&&gr(t,!0)==="@keyframes"){let s=Wi(t,r);i.push(s)}else if(n=="@"&&!_r(t,!0).includes(":")){let s=wr(t,r);s.name.length&&i.push(s)}else if(n=="<")Di(t);else if(!j.white_space(n)){let s=Fe(t,r);s.property&&i.push(s)}t.next()}return i}function ht(e,r=64){const[t,i,n]=[1,r,r*r];let[s,l,a]=(e+"").replace(/\s+/g,"").replace(/[,，xX]+/g,"x").split("x").map(c=>parseInt(c));const u=s==1||l==1?n:i,o=s==1&&l==1?n:t,f={x:C(s||t,1,u),y:C(l||s||t,1,u),z:C(a||t,1,o)};return Object.assign({},f,{count:f.x*f.y*f.z,ratio:f.x/f.y})}function Gi(e){let t=L(Sr(B(e,{preserveLineBreak:!0,ignoreInlineComment:!0}))),i=[],n=[],s,l,a={textures:[]};for(;t.next();){let{curr:u,next:o}=t.get();if(u.isSymbol("{")){if(i.length)n.push(u);else{let f=Ze(n);Yi(f)?(s=f,n=[]):n.push(u)}i.push("{")}else if(u.isSymbol("}"))if(i.pop(),!i.length&&s){let f=Ze(n);s&&f.length&&(s.startsWith("texture")?a.textures.push({name:s,value:f}):a[s]=f,n=[]),s=null}else n.push(u);else!M(l)&&l!=u.pos[1]&&(n.push(Mt()),l=null),(!s||!s.startsWith("texture"))&&u.isWord()&&u.value.startsWith("#")&&(n.push(Mt()),l=o.pos[1]),n.push(u)}return M(a.fragment)&&(a.fragment=Ze(n),a.textures=a.textures||[]),a}function Yi(e){return/^texture\w*$|^(fragment|vertex)$/.test(e)}function Mt(){return new U({type:"LineBreak",value:`
`})}function Sr(e){let r=e[0],t=e[e.length-1];for(;r&&r.isSymbol("(")&&t&&t.isSymbol(")");)e=e.slice(1,e.length-1),r=e[0],t=e[e.length-1];return e}function Ze(e){return Sr(e).map(r=>r.value).join("")}const Ki="http://www.w3.org/2000/svg",Ji="http://www.w3.org/1999/xlink";function Ge(e,r){return`url("data:image/svg+xml;utf8,${encodeURIComponent(e)+(r?`#${r}`:"")}")`}function Ye(e){const r=`xmlns="${Ki}"`,t=`xmlns:xlink="${Ji}"`;return e.includes("<svg")||(e=`<svg ${r} ${t}>${e}</svg>`),e.includes("xmlns")||(e=e.replace(/<svg([\s>])/,`<svg ${r} ${t}$1`)),e}const Qi="http://www.w3.org/2000/svg",en="http://www.w3.org/1999/xlink",tn=cr();class we{constructor(r,t=""){if(!r)throw new Error("Tag name is required");this.name=r,this.body=[],this.attrs={},this.isTextNode()&&(this.body=t)}isTextNode(){return this.name==="text-node"}find(r){let t=r.attrs.id,i=r.name;if(Array.isArray(this.body)&&t!==void 0)return this.body.find(n=>n.attrs.id===t&&n.name===i)}append(r){this.isTextNode()||this.body.push(r)}merge(r){for(let[t,i]of Object.entries(r.attrs))this.attrs[t]=i;Array.isArray(r.body)&&this.body.push(...r.body)}attr(r,t){if(!this.isTextNode())return t===void 0?this.attrs[r]:this.attrs[r]=t}toString(){if(this.isTextNode())return zt(this.body);let r=[""],t=[];for(let[i,n]of Object.entries(this.attrs))n=zt(n),r.push(`${i}="${n}"`);for(let i of this.body)t.push(i.toString());return`<${this.name}${r.join(" ")}>${t.join("")}</${this.name}>`}}function rn(e,r){return`${e}:${r};`}function zt(e){e=String(e);let r=e.startsWith('"')&&e.endsWith('"'),t=e.startsWith("'")&&e.endsWith("'");return r||t?e.substring(1,e.length-1):e}function nn(e){let r=e.detail.value,t=e.detail.padding||e.detail.p||e.detail.expand;if(!r.length)return"";let[i,n,s,l]=r;return t&&([i,n,s,l]=[i-t,i-t,s+t*2,l+t*2]),`${i} ${n} ${s} ${l}`}function mt(e,r,t,i){let n;if(r||(r=new we("root")),e.type==="block")if(e.name==="style"){let s=new we("style");s.append(e.value),r.append(s)}else{let s=new we(e.name);i||(i=s,i.attr("xmlns",Qi));for(let a of e.value){let u=mt(a,s,e,i);u&&(n=u)}if(e.inline){let a=e.value.find(u=>u.type==="statement"&&u.name==="id");a?n=a.value:(n=tn(e.name),s.attr("id",n))}let l=i.find(s);l?l.merge(s):r.append(s)}if(e.type==="statement"&&!e.variable)if(e.name==="content"){let s=new we("text-node",e.value);r.append(s)}else if(e.name.startsWith("style ")){let s=(e.name.split("style ")[1]||"").trim();if(s.length){let l=r.attr("style")||"";r.attr("style",l+rn(s,e.value))}}else{let s=e.value;if(s&&s.type==="block"){let l=mt(e.value,i,e,i);s=`url(#${l})`,(e.name==="xlink:href"||e.name==="href")&&(s=`#${l}`)}/viewBox/i.test(e.name)?(s=nn(e),s&&r.attr(e.name,s)):r.attr(e.name,s),e.name.includes("xlink:")&&i.attr("xmlns:xlink",en)}return t?n:i.toString()}function $e(e){return mt(e)}function oe(e){let r=L(B(e)),t={},i=!1;for(;r.next();){let{prev:n,curr:s,next:l}=r.get(),a=i&&(s.isWord()||s.isSymbol())&&n&&n.isNumber()&&!l;if(s.isNumber())t.value=Number(s.value),i=!0;else if(a)t.unit=s.value;else break}return t}function It(e){return(...r)=>{let t=[],i=[];for(let l of r){let{unit:a,value:u}=oe(l);a!==void 0&&t.push(a),u!==void 0&&i.push(u)}let n=e(...i),s=t.find(l=>l!==void 0);return s===void 0?n:Array.isArray(n)?n.map(l=>l+s):n+s}}function pt(e){return(...r)=>{let t=r.map(n=>String(n).charCodeAt(0)),i=e(...t);return Array.isArray(i)?i.map(n=>String.fromCharCode(n)):String.fromCharCode(i)}}const Ke=new Map,sn={π:Math.PI,gcd:(e,r)=>{for(;r;)[e,r]=[r,e%r];return e}},dt={"^":7,"*":6,"/":6,"÷":6,"%":6,"&":5,"|":5,"+":4,"-":4,"<":3,"<<":3,">":3,">>":3,"=":3,"==":3,"≤":3,"<=":3,"≥":3,">=":3,"≠":3,"!=":3,"∧":2,"&&":2,"∨":2,"||":2,"(":1,")":1};function We(e,r,t=[]){let i=[];for(;e.length;){let{name:n,value:s,type:l}=e.shift();if(l==="variable"){let a=r[s];ae(a)&&(a=Math[s]),ae(a)&&(a=Ot(s,r,t)),ae(a)&&/^\-\D/.test(s)&&(a=Ot("-1"+s.substr(1),r,t)),a===void 0&&(a=0),typeof a!="number"&&(t.push(a),kr(t)?(a=0,t=[]):a=We(pe(a),r,t)),i.push(a)}else if(l==="function"){let a=!1;/^\-/.test(n)&&(a=!0,n=n.substr(1));let u=s.map(c=>We(c,r,t)),o=n.split("."),f;for(;f=o.pop();){if(!f)continue;let c=r[f]||Math[f];u=typeof c=="function"?Array.isArray(u)?c(...u):c(u):0}a&&(u=-1*u),i.push(u)}else if(/\d+/.test(s))i.push(s);else{let a=i.pop(),u=i.pop();i.push(an(s,Number(u),Number(a)))}}return Number(i[0])||0}function ln(e){if(Ke.has(e))return Ke.get(e);let r=String(e),t=[],i="";for(let n=0;n<r.length;++n){let s=r[n];if(dt[s]){let l=w(t);if(s=="="&&l&&/^[!<>=]$/.test(l.value))l.value+=s;else if(/^[|&<>]$/.test(s)&&l&&l.value==s)l.value+=s;else if(s=="-"&&r[n-1]=="e")i+=s;else if(!t.length&&!i.length&&/[+-]/.test(s))i+=s;else{let{type:a,value:u}=l||{};a=="operator"&&!i.length&&/[^()]/.test(s)&&/[^()]/.test(u)?i+=s:(i.length&&(t.push({type:"number",value:i}),i=""),t.push({type:"operator",value:s}))}}else/\S/.test(s)&&(s==","?(t.push({type:"number",value:i}),i="",t.push({type:"comma",value:s})):s=="!"?(t.push({type:"number",value:i}),t.push({type:"operator",value:s}),i=""):i+=s)}return i.length&&t.push({type:"number",value:i}),Ke.set(e,t),t}function pe(e){let r=ln(e);const t=[],i=[];for(let n=0;n<r.length;++n){let{type:s,value:l}=r[n],a=r[n+1]||{};if(s=="number")if(a.value=="("&&/[^\d.\-]/.test(l)){let u="",o=[],f=[];for(n+=1;r[n++]!==void 0;){let c=r[n];if(c===void 0)break;let h=c.value;if(h==")"){if(!o.length)break;o.pop(),u+=h}else if(h=="("&&o.push(h),h==","&&!o.length){let m=pe(u);m.length&&f.push(m),u=""}else u+=h}u.length&&f.push(pe(u)),i.push({type:"function",name:l,value:f})}else/[^\d.\-]/.test(l)?i.push({type:"variable",value:l}):i.push({type:"number",value:l});else if(s=="operator")if(l=="(")t.push(l);else if(l==")"){for(;t.length&&w(t)!="(";)i.push({type:"operator",value:t.pop()});t.pop()}else{for(;t.length&&dt[w(t)]>=dt[l];){let u=t.pop();/[()]/.test(u)||i.push({type:"operator",value:u})}t.push(l)}}for(;t.length;)i.push({type:"operator",value:t.pop()});return i}function an(e,r,t){switch(e){case"+":return r+t;case"-":return r-t;case"*":return r*t;case"%":return r%t;case"|":return r|t;case"&":return r&t;case"<":return r<t;case">":return r>t;case"^":return Math.pow(r,t);case"÷":case"/":return r/t;case"=":case"==":return r==t;case"≤":case"<=":return r<=t;case"≥":case">=":return r>=t;case"≠":case"!=":return r!=t;case"∧":case"&&":return r&&t;case"∨":case"||":return r||t;case"<<":return r<<t;case">>":return r>>t}}function Ot(e,r,t){let[i,n,s]=e.match(/([\d.\-]+)(.*)/)||[],l=r[s];return l===void 0?l:typeof l=="number"?Number(n)*l:(t.push(l),kr(t)?(t=[],0):n*We(pe(l),r,t))}function kr(e){if(e.length>50)return!0;let r=w(e);for(let t=2;t<=4;++t){let i=e[e.length-t];if(i===void 0||r!==i)return!1}return!0}function z(e,r){const t=pe(e);return We(t,Object.assign({},sn,r))}class un{constructor(){this.cache={}}clear(){this.cache={}}set(r,t){if(b(r))return"";let i=this.getKey(r);return this.cache[i]=t}get(r){let t=this.getKey(r);return this.cache[t]}getKey(r){return ut(typeof r=="string"?r:JSON.stringify(r))}}const F=new un;function wt(e,r){return(...t)=>{let i=e+t.join("-");return F.get(i)||F.set(i,r(...t))}}function Se(e,r){return{type:e,value:r}}function on(e){let r=String(e),t=[],i=[];if(!r.startsWith("[")||!r.endsWith("]"))return t;for(let n=1;n<r.length-1;++n){let s=r[n];if(!(s=="-"&&r[n-1]=="-")){if(s=="-"){i.push(s);continue}if(w(i)=="-"){i.pop();let l=i.pop();t.push(l?Se("range",[l,s]):Se("char",s));continue}i.length&&t.push(Se("char",i.pop())),i.push(s)}}return i.length&&t.push(Se("char",i.pop())),t}const fn=wt("build_range",e=>{let r=on(e);return pr(r,({type:t,value:i})=>{if(t=="char")return i;let[n,s]=i,l=!1;n>s&&([n,s]=[s,n],l=!0);let a=pt(yi)(n,s);return l&&a.reverse(),a})});function Q(e){return(...r)=>e(...pr(r,t=>String(t).startsWith("[")?fn(t):t))}class cn{constructor(r){this.prev=this.next=null,this.data=r}}class hn{constructor(r=20){this._limit=r,this._size=0}push(r){this._size>=this._limit&&(this.root=this.root.next,this.root.prev=null);let t=new cn(r);this.root?(t.prev=this.tail,this.tail.next=t,this.tail=t):this.root=this.tail=t,this._size++}last(r=1){let t=this.tail;for(;--r&&t.prev;)t=t.prev;return t.data}}class mn{constructor(){this.p=Ci([151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180])}grad(r,t,i,n){let s=r&15,l=s<8?t:i,a=s<4?i:s==12||s==14?t:n;return(s&1?-l:l)+(s&2?-a:a)}noise(r,t,i){let{p:n,grad:s}=this,[l,a,u]=[r,t,i].map(g=>Math.floor(g)&255);[r,t,i]=[r,t,i].map(g=>g-Math.floor(g));let[o,f,c]=[r,t,i].map(g=>g*g*g*(g*(g*6-15)+10)),h=n[l]+a,m=n[h]+u,p=n[h+1]+u,d=n[l+1]+a,_=n[d]+u,y=n[d+1]+u;return I(c,I(f,I(o,s(n[m],r,t,i),s(n[_],r-1,t,i)),I(o,s(n[p],r,t-1,i),s(n[y],r-1,t-1,i))),I(f,I(o,s(n[m+1],r,t,i-1),s(n[_+1],r-1,t,i-1)),I(o,s(n[p+1],r,t-1,i-1),s(n[y+1],r-1,t-1,i-1))))}}function Bt(e,r){let t={},i=!0;for(let n=0;n<e.length;++n){let s=e[n],l=r[n];if(/=/.test(s)){let[a,u]=A(s,{symbol:"=",noSpace:!0});u!==void 0?(r.includes(a)&&(t[a]=u),i=!1):t[l]=s}else i&&(t[l]=s)}return t}function Pe(e){let r=L(B(e)),t={},i=[],n,s=!1;for(;r.next();){let{prev:l,curr:a,next:u}=r.get();if(a.isSymbol(":")&&!n)n=Je(i),i=[];else if(a.isSymbol(";")&&n)t[n]=Wt(n,Je(i),s),i=[],n=null,s=!1;else if(!a.isSymbol(";")){let o=l&&l.isSymbol("-"),f=u&&u.isSymbol("-"),c=a.isSymbol("-");!n&&!i.length&&c&&!o&&!f?u&&u.isSymbol(":")?i.push(a):s=!0:i.push(a)}}return i.length&&n&&(t[n]=Wt(n,Je(i),s)),t}function Wt(e,r,t){return["fill-rule","fill"].includes(e)?r:t?`-1 * (${r})`:r}function Je(e){return e.map(r=>r.value).join("")}const pn=["auto","reverse"],dn=["deg","rad","grad","turn"];function gn(e){let r=L(B(e)),t=!1,i="",n={direction:"",angle:""};for(;r.next();){let{prev:s,curr:l,next:a}=r.get();if(l.isWord()&&pn.includes(l.value))n.direction=l.value,t=!0;else if(l.isNumber())n.angle=Number(l.value),t=!0;else if(l.isWord()&&s&&s.isNumber()&&dn.includes(l.value))i=l.value;else if(l.isSpace()&&n.direction!==""&&n.angle!=="")break}return t||(n.direction="auto"),_n(n,i)}function _n(e,r){let{angle:t}=e;return t===""&&(t=0),r==="rad"&&(t/=Math.PI/180),r==="grad"&&(t*=.9),r==="turn"&&(t*=360),Object.assign({},e,{angle:t})}const{cos:de,sin:ge,abs:yn,atan2:jr,PI:$t}=Math,k=wi(e=>Re(Pe(e),{min:3,max:3600})),De={circle:()=>k`
    split: 180;
    scale: .99
  `,triangle:()=>k`
    rotate: 30;
    scale: 1.1;
    move: 0 .2
  `,pentagon:()=>k`
    split: 5;
    rotate: 54
  `,hexagon:()=>k`
    split: 6;
    rotate: 30;
    scale: .98
  `,octagon:()=>k`
    split: 8;
    rotat: 22.5;
    scale: .99
  `,star:()=>k`
    split: 10;
    r: cos(5t);
    rotate: -18;
    scale: .99
  `,infinity:()=>k`
    split: 180;
    scale: .99;
    x: cos(t)*.99 / (sin(t)^2 + 1);
    y: x * sin(t)
  `,heart:()=>k`
    split: 180;
    rotate: 180;
    a: cos(t)*13/18 - cos(2t)*5/18;
    b: cos(3t)/18 + cos(4t)/18;
    x: (.75 * sin(t)^3) * 1.2;
    y: (a - b + .2) * -1.1
  `,bean:()=>k`
    split: 180;
    r: sin(t)^3 + cos(t)^3;
    move: -.35 .35;
  `,bicorn:()=>k`
    split: 180;
    x: cos(t);
    y: sin(t)^2 / (2 + sin(t)) - .5
  `,drop:()=>k`
    split: 180;
    rotate: 90;
    scale: .95;
    x: sin(t);
    y: (1 + sin(t)) * cos(t) / 1.6
  `,fish:()=>k`
    split: 240;
    x: cos(t) - sin(t)^2 / sqrt(2) - .04;
    y: sin(2t)/2
  `,whale:()=>k`
    split: 240;
    rotate: 180;
    R: 3.4 * (sin(t)^2 - .5) * cos(t);
    x: cos(t) * R + .75;
    y: sin(t) * R * 1.2
  `,windmill:()=>k`
    split: 18;
    R: seq(.618, 1, 0);
    T: seq(t-.55, t, t);
    x: R * cos(T);
    y: R * sin(T)
  `,vase:()=>k`
    split: 240;
    scale: .3;
    x: sin(4t) + sin(t) * 1.4;
    y: cos(t) + cos(t) * 4.8 + .3
  `,clover:(e=3)=>(e=C(e,3,5),e==4&&(e=2),k`
      split: 240;
      r: cos(${e}t);
      scale: .98
    `),hypocycloid:(e=3)=>{e=C(e,3,5);let r=[0,0,0,.34,.25,.19][e];return k`
      split: 240;
      scale: ${r};
      k: ${e};
      x: (k-1)*cos(t) + cos((k-1)*t);
      y: (k-1)*sin(t) - sin((k-1)*t)
    `},bud:(e=3)=>(e=C(e,3,10),k`
      split: 240;
      scale: .8;
      r: 1 + .2 * cos(${e}t)
    `)};class Dt{constructor(r,t,i){this.x=r,this.y=t,this.extra=i}valueOf(){return this.x+" "+this.y}toString(){return this.valueOf()}}function vn(e,r){typeof arguments[0]=="function"&&(r=e,e={}),r||(r=p=>[de(p),ge(p)]);let t=e.split||180,i=e.turn||1,n=e.frame,s=e.fill||e["fill-rule"],l=gn(e.direction||e.dir||""),a=e.unit,u=$t*2*i/t,o=[],f,c,h=e.scale===void 0?1:e.scale,m=([p,d,_=0,y=0])=>{if(p=="evenodd"||p=="nonzero")return o.push(new Dt(p,"",""));let[g,x]=Ut(p,-d,h),[$,T]=Ut(_,-y,h),W=bn(g,x,$,T,l);a!==void 0&&a!=="%"?a!=="none"&&(g+=a,x+=a):(g=(g+1)*50+"%",x=(x+1)*50+"%"),o.push(new Dt(g,x,W))};(s=="nonzero"||s=="evenodd")&&m([s,"",""]);for(let p=0;p<t;++p){let d=u*p,_=r(d,p);p||(f=_),m(_)}if(n!==void 0){m(f);let p=n/100;i>1&&(p*=2),p==0&&(p=.002);for(let d=0;d<t;++d){let _=-u*d,[y,g,x=0,$=0]=r(_,d),T=jr(g+$,y-x),W=[y-p*de(T),g-p*ge(T)];d||(c=W),m(W)}m(c),m(f)}return o}function bn(e,r,t,i,n){let s=jr(r+i,e-t)*180/$t;return n.direction==="reverse"&&(s-=180),n.direction||(s=90),n.angle&&(s+=n.angle),s}function xn(e,r,t){let i=-$t/180*t;return[e*de(i)-r*ge(i),r*de(i)+e*ge(i)]}function wn(e,r,t){let[i,n=i]=A(t).map(Number);return[e+(i||0),r-(n||0),i,n]}function Ut(e,r,t){let[i,n=i]=A(t).map(Number);return[e*i,r*n]}function Re(e,{min:r,max:t}){let i=C(parseInt(e.vertices||e.points||e.split)||0,r,t),n=M(e.x)?"cos(t)":e.x,s=M(e.y)?"sin(t)":e.y,l=M(e.r)?"":e.r,a=M(e.t)?"":e.t,{unit:u,value:o}=oe(l);u&&!e[u]&&u!=="t"&&(M(e.unit)&&(e.unit=u),l=e.r=o),e.degree&&(e.rotate=e.degree),e.origin&&(e.move=e.origin);let f=Object.assign({},e,{split:i});return vn(f,(c,h)=>{let m=Object.assign({},e,{t:a||c,θ:a||c,i:h+1,seq(...g){return g.length?g[h%g.length]:""},range(g,x=0){g=Number(g)||0,x=Number(x)||0,g>x&&([g,x]=[x,g]);let $=yn(x-g)/(i-1);return g+$*h}}),p=z(n,m),d=z(s,m),_=0,y=0;if(l){let g=z(l,m);g==0&&(g=1e-5),a&&(c=z(a,m)),p=g*de(c),d=g*ge(c)}return e.rotate&&([p,d]=xn(p,d,Number(e.rotate)||0)),e.move&&([p,d,_,y]=wn(p,d,e.move)),[p,d,_,y]})}const $n="MmLlHhVvCcSsQqTtAaZz",Sn="mlhvcsqtaz";function ke(e){let r=L(B(e)),t={},i={commands:[],valid:!0};for(;r.next();){let{curr:n}=r.get();if(!(n.isSpace()||n.isSymbol(",")))if(n.isWord())t.name&&(i.commands.push(t),t={}),t.name=n.value,t.value=[],$n.includes(n.value)?Sn.includes(n.value)?t.type="relative":t.type="absolute":(t.type="unknown",i.valid=!1);else if(t.value){let s=n.value;n.isNumber()&&(s=Number(n.value)),t.value.push(s)}else t.name||(i.valid=!1)}return t.name&&i.commands.push(t),i}const E={name:"cssd-uniform-time","animation-name":"cssd-uniform-time-animation","animation-duration":31536e6,"animation-iteration-count":"infinite","animation-delay":"0s","animation-direction":"normal","animation-fill-mode":"none","animation-play-state":"running","animation-timing-function":"linear"};E.animation=`
  ${E["animation-duration"]}ms
  ${E["animation-timing-function"]}
  ${E["animation-delay"]}
  ${E["animation-iteration-count"]}
  ${E["animation-name"]}
`;const Tr={name:"cssd-uniform-mousex"},Er={name:"cssd-uniform-mousey"},Ar={name:"cssd-uniform-width"},Nr={name:"cssd-uniform-height"},Z=Object.freeze(Object.defineProperty({__proto__:null,uniform_height:Nr,uniform_mousex:Tr,uniform_mousey:Er,uniform_time:E,uniform_width:Ar},Symbol.toStringTag,{value:"Module"}));function Qe(e){return re((r,t,...i)=>{if(!i||!t)return"";let n=S(t()),s=n;/\D/.test(n)&&!/\d+[x-]\d+/.test(n)&&(s=z(n),s===0&&(s=n));let l=Math.random();return vi(s,(...a)=>i.map(u=>S(u(...a,l))).join(",")).join(e)})}function H(e,r,t){return e[r]||(e[r]=new hn),e[r].push(t),t}function qt(e){return-1*e}function kn(e,r,t,i=1){let s=Math.sqrt(2/4)*i,[l,a]=[-s,s];return I((e-l)/(a-l),r*i,t*i)}function Ft(e,r,t){switch(e){case"+":return r+t;case"-":return r-t;case"*":return r*t;case"/":return r/t;case"%":return r%t;default:return 0}}function R(e){return r=>{if(M(r)||M(e))return e;if(/^[+*-\/%][.\d\s]/.test(r)){let t=r[0],{unit:i="",value:n}=oe(r.substr(1).trim()||0);return Ft(t,e,n)+i}else if(/[+*-\/%]$/.test(r)){let t=r.substr(-1),{unit:i="",value:n}=oe(r.substr(0,r.length-1).trim()||0);return Ft(t,n,e)+i}else{let{unit:t="",value:i}=oe(r||0);return e+i+t}}}const gt=or({i({count:e}){return R(e)},y({y:e}){return R(e)},x({x:e}){return R(e)},z({z:e}){return R(e)},I({grid:e}){return R(e.count)},Y({grid:e}){return R(e.y)},X({grid:e}){return R(e.x)},Z({grid:e}){return R(e.z)},id({x:e,y:r,z:t}){return i=>ue(e,r,t)},dx({x:e,grid:r}){return t=>(t=Number(t)||0,e-.5-t-r.x/2)},dy({y:e,grid:r}){return t=>(t=Number(t)||0,e-.5-t-r.y/2)},n({extra:e}){let r=w(e);return r?R(r[0]):"@n"},nx({extra:e}){let r=w(e);return r?R(r[1]):"@nx"},ny({extra:e}){let r=w(e);return r?R(r[2]):"@ny"},N({extra:e}){let r=w(e);return r?R(r[3]):"@N"},m:Qe(","),M:Qe(" "),µ:Qe(""),p({context:e,pick:r}){return Q((...t)=>{t.length||(t=e.last_pick_args||[]);let i=r(t);return e.last_pick_args=t,H(e,"last_pick",i)})},P({context:e,pick:r,position:t}){let i="P-counter"+t;return Q((...n)=>{let s=!0;n.length||(n=e.last_pick_args||[],s=!1);let l=e.last_pick,a=l?l.last(1):"";if(s&&(e[i]||(e[i]={}),a=e[i].last_pick),n.length>1){let o=n.findIndex(f=>f===a);o!==-1&&n.splice(o,1)}let u=r(n);return e.last_pick_args=n,s&&(e[i].last_pick=u),H(e,"last_pick",u)})},pl({context:e,extra:r,position:t}){let i=w(r),n=i?w(i):"",s="pl-counter"+t+n;return Q((...l)=>{e[s]||(e[s]=0),e[s]+=1;let a=l.length,u=i&&i[6];b(u)&&(u=e[s]);let o=(u-1)%a,f=l[o];return H(e,"last_pick",f)})},pr({context:e,extra:r,position:t}){let i=w(r),n=i?w(i):"",s="pr-counter"+t+n;return Q((...l)=>{e[s]||(e[s]=0),e[s]+=1;let a=l.length,u=i&&i[6];b(u)&&(u=e[s]);let o=(u-1)%a,f=l[a-o-1];return H(e,"last_pick",f)})},pd({context:e,extra:r,position:t,shuffle:i}){let n=w(r),s=n?w(n):"",l="pd-counter"+t+s,a="pd-values"+t+s;return Q((...u)=>{e[l]||(e[l]=0),e[l]+=1,e[a]||(e[a]=i(u||[]));let o=u.length,f=n&&n[6];b(f)&&(f=e[l]);let c=(f-1)%o,h=e[a][c];return H(e,"last_pick",h)})},lp({context:e}){return(r=1)=>{let t=e.last_pick;return t?t.last(r):""}},r({context:e,rand:r}){return(...t)=>{let n=(t.every(He)?pt:It)(r)(...t);return H(e,"last_rand",n)}},rn({x:e,y:r,context:t,position:i,grid:n,extra:s,random:l}){let a="noise-2d"+i,u=a+"offset-x",o=a+"offset-y",[f,c,h,m,p,d]=w(s)||[],_=f&&m;return(...y)=>{let{from:g=0,to:x=g,frequency:$=1,scale:T=1,octave:W=1}=Bt(y,["from","to","frequency","scale","octave"]);$=C($,0,1/0),T=C(T,0,1/0),W=C(W,1,100),y.length==1&&([g,x]=[0,g]),t[a]||(t[a]=new mn),t[u]||(t[u]=l()),t[o]||(t[o]=l());let Dr=He(g)&&He(x)?pt:It,St=t[a],kt=t[u],jt=t[o],G=(_?(c-1)/p:(e-1)/n.x)+kt,Y=(_?(h-1)/d:(r-1)/n.y)+jt;(p<=1||n.x<=1)&&(G=0),(d<=1||n.y<=1)&&(Y=0),G==0&&Y==0&&(G=kt,Y=jt);let Tt=St.noise(G*$,Y*$,0)*T;for(let K=1;K<W;++K){let J=K*2;Tt+=St.noise(G*$*J,Y*$*J,0)*(T/J)}let Ur=Dr((K,J)=>kn(Tt,K,J,T));return H(t,"last_rand",Ur(g,x))}},lr({context:e}){return(r=1)=>{let t=e.last_rand;return t?t.last(r):""}},stripe(){return(...e)=>{let r=e.map(S),t=r.length,i=0,n=[],s;if(!t)return"";r.forEach(a=>{let[u,o]=A(a);o!==void 0?n.push(o):i+=1});let l=n.length?`(100% - ${n.join(" - ")}) / ${i}`:`100% / ${t}`;return r.map((a,u)=>{if(n.length){let[o,f]=A(a);return s=(s?s+" + ":"")+(f!==void 0?f:l),`${o} 0 calc(${s})`}return`${a} 0 ${100/t*(u+1)}%`}).join(",")}},calc(){return e=>z(S(e))},hex(){return e=>parseInt(S(e)).toString(16)},svg:re((e,...r)=>{let t=r.map(n=>S(n())).join(",");if(!t.startsWith("<")){let n=ne(t);t=$e(n)}let i=Ye(t);return Ge(i)}),Svg:re((e,...r)=>{let t=r.map(i=>S(i())).join(",");if(!t.startsWith("<")){let i=ne(t);t=$e(i)}return Ye(t)}),filter:re((e,...r)=>{let t=r.map(l=>S(l())),i=t.join(","),n=ie("filter-");if(t.every(l=>/^[\-\d.]/.test(l)||/^(\w+)/.test(l)&&!/[{}<>]/.test(l))){let{frequency:l,scale:a,octave:u,seed:o=e.seed,blur:f,erode:c,dilate:h}=Bt(t,["frequency","scale","octave","seed","blur","erode","dilate"]);if(i=`
        x: -20%;
        y: -20%;
        width: 140%;
        height: 140%;
      `,b(h)||(i+=`
          feMorphology {
            operator: dilate;
            radius: ${h};
          }
        `),b(c)||(i+=`
          feMorphology {
            operator: erode;
            radius: ${c};
          }
        `),b(f)||(i+=`
          feGaussianBlur {
            stdDeviation: ${f};
          }
        `),!b(l)){let[m,p=m]=A(l);u=u?`numOctaves: ${u};`:"",i+=`
          feTurbulence {
            type: fractalNoise;
            baseFrequency: ${m} ${p};
            seed: ${o};
            ${u}
          }
        `,a&&(i+=`
            feDisplacementMap {
              in: SourceGraphic;
              scale: ${a};
            }
          `)}}if(!i.startsWith("<")){let l=ne(i,{type:"block",name:"filter"});i=$e(l)}let s=Ye(i).replace(/<filter([\s>])/,`<filter id="${n}"$1`);return Ge(s,n)}),"svg-pattern":re((e,...r)=>{let t=r.map(s=>S(s())).join(","),i=ne(`
      viewBox: 0 0 1 1;
      preserveAspectRatio: xMidYMid slice;
      rect {
        width, height: 100%;
        fill: defs pattern { ${t} }
      }
    `),n=$e(i);return Ge(n)}),var(){return e=>`var(${S(e)})`},ut(){return e=>`var(--${E.name})`},uw(){return e=>`var(--${Ar.name})`},uh(){return e=>`var(--${Nr.name})`},ux(){return e=>`var(--${Tr.name})`},uy(){return e=>`var(--${Er.name})`},plot({count:e,context:r,extra:t,position:i,grid:n}){let s="offset-points"+i,l=w(t);return a=>{let[u=e,o,f,c=n.count]=l||[];if(!r[s]){let h=Pe(a);delete h.fill,delete h["fill-rule"],delete h.frame,h.points=c,r[s]=Re(h,{min:1,max:65536})}return r[s][u-1]}},Plot({count:e,context:r,extra:t,position:i,grid:n}){let s="Offset-points"+i,l=w(t);return a=>{let[u=e,o,f,c=n.count]=l||[];if(!r[s]){let h=Pe(a);delete h.fill,delete h["fill-rule"],delete h.frame,h.points=c,h.unit=h.unit||"none",r[s]=Re(h,{min:1,max:65536})}return r[s][u-1]}},shape(){return wt("shape-function",(e="",...r)=>{e=String(e).trim();let t=[];if(e.length)if(typeof De[e]=="function")t=De[e](r);else{let i=e,n=r.join(",");n.length&&(i=e+","+n);let s=Pe(i);t=Re(s,{min:3,max:3600})}return`polygon(${t.join(",")})`})},doodle(){return e=>e},shaders(){return e=>e},canvas(){return e=>e},pattern(){return e=>e},invert(){return e=>{let r=ke(e);return r.valid?r.commands.map(({name:t,value:i})=>{switch(t){case"v":return"h"+i.join(" ");case"V":return"H"+i.join(" ");case"h":return"v"+i.join(" ");case"H":return"V"+i.join(" ");default:return t+i.join(" ")}}).join(" "):e}},flipH(){return e=>{let r=ke(e);return r.valid?r.commands.map(({name:t,value:i})=>{switch(t){case"h":case"H":return t+i.map(qt).join(" ");default:return t+i.join(" ")}}).join(" "):e}},flipV(){return e=>{let r=ke(e);return r.valid?r.commands.map(({name:t,value:i})=>{switch(t){case"v":case"V":return t+i.map(qt).join(" ");default:return t+i.join(" ")}}).join(" "):e}},flip(...e){let r=gt.flipH(...e),t=gt.flipV(...e);return i=>t(r(i))},reverse(){return(...e)=>{let r=e.map(S),t=ke(r.join(","));if(t.valid){let i=[];for(let n=t.commands.length-1;n>=0;--n){let{name:s,value:l}=t.commands[n];i.push(s+l.join(" "))}return i.join(" ")}return r.reverse()}},cycle(){return(...e)=>{e=e.map(s=>"("+s+")");let r=[],t;e.length==1?(t=" ",r=A(e[0],{symbol:t})):(t=",",r=A(e.map(S).join(t),{symbol:t})),r=r.map(s=>s.replace(/^\(|\)$/g,""));let i=r.length-1,n=[r.join(t)];for(let s=0;s<i;++s){let l=r.shift();r.push(l),n.push(r.join(t))}return n}},mirror(){return(...e)=>{for(let r=e.length-1;r>=0;--r)e.push(e[r]);return e}},Mirror(){return(...e)=>{for(let r=e.length-2;r>=0;--r)e.push(e[r]);return e}},unicode(){return(...e)=>e.map(r=>String.fromCharCode(r))},once({context:e,extra:r,position:t}){let i="once-counter"+t;return(...n)=>(b(e[i])&&(e[i]=n),e[i])}},{index:"i",col:"x",row:"y",depth:"z",rand:"r",pick:"p",pn:"pl",pnr:"pr",stripes:"stripe",strip:"stripe",patern:"pattern",flipv:"flipV",fliph:"flipH",t:"ut","svg-filter":"filter","last-rand":"lr","last-pick":"lp",multiple:"m",multi:"m",rep:"µ",repeat:"µ",ms:"M",s:"I",size:"I",sx:"X","size-x":"X","size-col":"X","max-col":"X",sy:"Y","size-y":"Y","size-row":"Y","max-row":"Y",sz:"Z","size-z":"Z","size-depth":"Z","pick-by-turn":"pl","pick-n":"pl","pick-d":"pd",offset:"plot",Offset:"Plot",point:"plot",Point:"Plot",paint:"canvas"}),Pr={"4a0":[1682,2378],"2a0":[1189,1682],a0:[841,1189],a1:[594,841],a2:[420,594],a3:[297,420],a4:[210,297],a5:[148,210],a6:[105,148],a7:[74,105],a8:[52,74],a9:[37,52],a10:[26,37],b0:[1e3,1414],b1:[707,1e3],b2:[500,707],b3:[353,500],b4:[250,353],b5:[176,250],b6:[125,176],b7:[88,125],b8:[62,88],b9:[44,62],b10:[31,44],b11:[22,32],b12:[16,22],c0:[917,1297],c1:[648,917],c2:[458,648],c3:[324,458],c4:[229,324],c5:[162,229],c6:[114,162],c7:[81,114],c8:[57,81],c9:[40,57],c10:[28,40],c11:[22,32],c12:[16,22],d0:[764,1064],d1:[532,760],d2:[380,528],d3:[264,376],d4:[188,260],d5:[130,184],d6:[92,126],letter:[216,279],postcard:[100,148],poster:[390,540]},jn={portrait:"p",pt:"p",p:"p",landscape:"l",ls:"l",l:"l"},Tn="mm";function En(e,r){e=String(e).toLowerCase();let[t,i]=Pr[e]||[];return jn[r]=="p"&&([i,t]=[t,i]),[i,t].map(n=>n+Tn)}function An(e){return!!Pr[e]}let je=[];function Rr(e){if(!je.length){let r=new Set;if(typeof document<"u")for(let t in document.head.style)t.startsWith("-")||r.add(t.replace(/[A-Z]/g,"-$&").toLowerCase());r.has("grid-gap")||r.add("grid-gap"),je=Array.from(r)}return e instanceof RegExp?je.filter(r=>e.test(r)):je}function Cr(e){let r=new RegExp(`\\-?${e}\\-?`);return Rr(r).map(t=>t.replace(r,"")).reduce((t,i)=>(t[i]=i,t),{})}const Nn=Cr("webkit"),Pn=Cr("moz");function Lr(e,r){return Nn[e]?`-webkit-${r} ${r}`:Pn[e]?`-moz-${r} ${r}`:r}const Rn={center:"50%",left:"0%",right:"100%",top:"50%",bottom:"50%"},Cn={center:"50%",top:"0%",bottom:"100%",left:"50%",right:"50%"},Te=or({size(e,{is_special_selector:r,grid:t}){let[i,n=i,s]=A(e);An(i)&&([i,n]=En(i,n));let l=`
      width: ${i};
      height: ${n};
    `;return(i==="auto"||n==="auto")&&(s&&(/^\(.+\)$/.test(s)?s=s.substring(1,s.length-1):/^calc/.test(s)||(s=`calc(${s})`),r||(l+=`aspect-ratio: ${s};`)),r&&(l+=`aspect-ratio: ${s||t.ratio};`)),r||(l+=`
        --internal-cell-width: ${i};
        --internal-cell-height: ${n};
      `),l},place(e,{extra:r}){let[t,i="50%"]=A(e);t=Rn[t]||t,i=Cn[i]||i;const n="var(--internal-cell-width, 25%)",s="var(--internal-cell-height, 25%)";return`
      position: absolute;
      left: ${t};
      top: ${i};
      width: ${n};
      height: ${s};
      margin-left: calc(${n} / -2);
      margin-top: calc(${s} / -2);
      grid-area: unset;
      --plot-angle: ${r||0};
      rotate: ${r||0}deg;
    `},grid(e,r){let t={clip:!0};/no\-*clip/i.test(e)&&(t.clip=!1,e=e.replace(/no\-*clip/i,""));let i=A(e,{symbol:["/","+","*","|","-","~"],noSpace:!0,verbose:!0});for(let{group:n,value:s}of i)n==="+"&&(t.scale=s),n==="*"&&(t.rotate=s),n==="~"&&(t.translate=s),n==="/"&&(t.size===void 0?t.size=this.size(s,r):t.fill=s),(n==="|"||n=="-"||n=="")&&!t.grid&&(t.grid=ht(s,r.max_grid),n==="|"&&(t.flexColumn=!0),n==="-"&&(t.flexRow=!0));return t},gap(e){return e},seed(e){return e},shape:wt("shape-property",e=>{let[r,...t]=A(e);if(typeof De[r]!="function")return"";let i="clip-path",n=De[r](...t),s=`${i}: polygon(${n.join(",")});`;return Lr(i,s)+"overflow: hidden;"}),use(e){if(e.length>2)return e},content(e){return e}},{"place-cell":"place",offset:"place",position:"place"}),D={even:e=>!(e%2),odd:e=>!!(e%2)};function et(e,r,t){for(let i=0;i<=t;++i)if(z(e,{n:i})==r)return!0}const Ln={at({x:e,y:r}){return(t,i)=>e==t&&r==i},nth({count:e,grid:r}){return(...t)=>t.some(i=>D[i]?D[i](e):et(i,e,r.count))},row({y:e,grid:r}){return(...t)=>t.some(i=>D[i]?D[i](e):et(i,e,r.y))},col({x:e,grid:r}){return(...t)=>t.some(i=>D[i]?D[i](e):et(i,e,r.x))},even({count:e,grid:r,x:t,y:i}){return n=>D.odd(t+i)},odd({count:e,grid:r,x:t,y:i}){return n=>D.even(t+i)},random({random:e,count:r,x:t,y:i,grid:n}){return(s=.5)=>/\D/.test(s)?e()<z("("+s+")",{x:t,X:n.x,y:i,Y:n.y,i:r,I:n.count,random:e}):e()<s},match({count:e,grid:r,x:t,y:i,random:n}){return s=>!!z("("+s+")",{x:t,X:r.x,y:i,Y:r.y,i:e,I:r.count,random:n})}};var ee=globalThis,_e=Math,Ue=[],O=256,Mr=6,Mn=52,zn="random",In=_e.pow(O,Mr),zr=_e.pow(2,Mn),On=zr*2,X=O-1,Ht;function Ee(e,r,t){var i=[];r=r==!0?{entropy:!0}:r||{};var n=_t(Ir(r.entropy?[e,ye(Ue)]:e??Wn(),3),i),s=new Bn(i),l=function(){for(var a=s.g(Mr),u=In,o=0;a<zr;)a=(a+o)*O,u*=O,o=s.g(1);for(;a>=On;)a/=2,u/=2,o>>>=1;return(a+o)/u};return l.int32=function(){return s.g(4)|0},l.quick=function(){return s.g(4)/4294967296},l.double=l,_t(ye(s.S),Ue),(r.pass||t||function(a,u,o,f){return f&&(f.S&&Xt(f,s),a.state=function(){return Xt(s,{})}),o?(_e[zn]=a,u):a})(l,n,"global"in r?r.global:this==_e,r.state)}function Bn(e){var r,t=e.length,i=this,n=0,s=i.i=i.j=0,l=i.S=[];for(t||(e=[t++]);n<O;)l[n]=n++;for(n=0;n<O;n++)l[n]=l[s=X&s+e[n%t]+(r=l[n])],l[s]=r;(i.g=function(a){for(var u,o=0,f=i.i,c=i.j,h=i.S;a--;)u=h[f=X&f+1],o=o*O+h[X&(h[f]=h[c=X&c+u])+(h[c]=u)];return i.i=f,i.j=c,o})(O)}function Xt(e,r){return r.i=e.i,r.j=e.j,r.S=e.S.slice(),r}function Ir(e,r){var t=[],i=typeof e,n;if(r&&i=="object")for(n in e)try{t.push(Ir(e[n],r-1))}catch{}return t.length?t:i=="string"?e:e+"\0"}function _t(e,r){for(var t=e+"",i,n=0;n<t.length;)r[X&n]=X&(i^=r[X&n]*19)+t.charCodeAt(n++);return ye(r)}function Wn(){try{var e;return Ht&&(e=Ht.randomBytes)||(e=new Uint8Array(O),(ee.crypto||ee.msCrypto).getRandomValues(e)),ye(e)}catch{var r=ee.navigator,t=r&&r.plugins;return[+new Date,ee,t,ee.screen,ye(Ue)]}}function ye(e){return String.fromCharCode.apply(0,e)}_t(_e.random(),Ue);function q(e){return/^\:(host|doodle)/.test(e)}function Ce(e){return/^\:(container|parent)/.test(e)}function tt(e){return q(e)||Ce(e)}function Dn(e){return/\:before|\:after/.test(e)}const Or={};for(let e of Object.getOwnPropertyNames(Math))Or[e]=()=>(...r)=>typeof Math[e]=="number"?Math[e]:(r=r.map(t=>z(S(t))),Math[e](...r));class Un{constructor(r){this.tokens=r,this.rules={},this.props={},this.keyframes={},this.grid=null,this.seed=null,this.is_grid_defined=!1,this.is_gap_defined=!1,this.coords=[],this.doodles={},this.canvas={},this.pattern={},this.shaders={},this.reset(),this.custom_properties={},this.uniforms={},this.content={}}reset(){this.styles={host:"",container:"",cells:"",keyframes:""},this.coords=[],this.doodles={},this.canvas={},this.pattern={},this.shaders={},this.content={};for(let r in this.rules)r.startsWith("#c")&&delete this.rules[r]}add_rule(r,t){let i=this.rules[r];i||(i=this.rules[r]=[]),i.push.apply(i,be(t))}pick_func(r){return gt[r]||Or[r]}apply_func(r,t,i){let n=r(...be(t)),s=[];return i.forEach(l=>{let a=typeof l.value,u=a==="number"||a==="string";if(!l.cluster&&u)s.push(...A(l.value,{noSpace:!0}));else if(typeof l=="function")s.push(l);else if(!b(l.value)){let o=S(l.value);s.push(o)}}),s=Li(s),typeof n=="function"?n(...be(s)):n}compose_aname(...r){return r.join("-")}compose_selector({x:r,y:t,z:i},n=""){return`#${ue(r,t,i)}${n}`}is_composable(r){return["doodle","shaders","canvas","pattern"].includes(r)}read_var(r,t){let i=t.count,n=Object.assign({},this.custom_properties.host,this.custom_properties.container,this.custom_properties[i]);if(n[r]!==void 0){let s=String(n[r]).trim();return s[0]=="("&&s[s.length-1]===")"&&(s=s.substring(1,s.length-1)),s.replace(/;+$/g,"")}return r}compose_argument(r,t,i=[],n){t.extra||(t.extra=[]),t.extra.push(i);let s=r.map(l=>{if(l.type==="text")return/^\-\-\w/.test(l.value)?n&&n.name==="@var"?l.value:this.read_var(l.value,t):l.value;if(l.type==="func"){let a=l.name.substr(1),u=this.pick_func(a);if(typeof u=="function"){if(this.check_uniforms(a),this.is_composable(a)){let c=S((l.arguments[0]||[])[0]),h;if(a==="doodle"&&/^\d/.test(c)&&(h=c,c=S((val.arguments[1]||[])[0])),!b(c))switch(a){case"doodle":return this.compose_doodle(this.inject_variables(c,t.count),h);case"shaders":return this.compose_shaders(c,t);case"canvas":return this.compose_canvas(c,l.arguments.slice(1));case"pattern":return this.compose_pattern(c,t)}}t.position=l.position;let o=l.arguments.map(c=>u.lazy?(...h)=>this.compose_argument(c,t,h,l):this.compose_argument(c,t,i,l));return this.apply_func(u,t,o)}else return l.name}});return t.extra.pop(),{cluster:r.cluster,value:s.length>=2?{value:s.join("")}:s[0]}}compose_doodle(r,t){let i=ie("doodle");return this.doodles[i]={doodle:r,arg:t},"${"+i+"}"}compose_shaders(r,{x:t,y:i,z:n}){let s=ie("shader");return this.shaders[s]={id:"--"+s,shader:r,cell:ue(t,i,n)},"${"+s+"}"}compose_pattern(r,{x:t,y:i,z:n}){let s=ie("pattern");return this.pattern[s]={id:"--"+s,code:r,cell:ue(t,i,n)},"${"+s+"}"}compose_canvas(r,t=[]){let i=r,n=t.map(l=>S(l[0])).join(",");n.length&&(i=r+","+n);let s=ie("canvas");return this.canvas[s]={code:i},"${"+s+"}"}check_uniforms(r){switch(r){case"ut":case"t":this.uniforms.time=!0;break;case"ux":this.uniforms.mousex=!0;break;case"uy":this.uniforms.mousey=!0;break;case"uw":this.uniforms.width=!0;break;case"uh":this.uniforms.height=!0;break}}inject_variables(r,t){let i=Object.assign({},this.custom_properties.host,this.custom_properties.container,this.custom_properties[t]),n=[];for(let[s,l]of Object.entries(i))n.push(`${s}: ${l};`);return n=n.join(""),n.length?`:doodle { ${n} }`+r:r}compose_value(r,t){if(!Array.isArray(r))return{value:"",extra:""};let i="";return{value:r.reduce((s,l)=>{switch(l.type){case"text":{s+=l.value;break}case"func":{let a=l.name.substr(1),u=this.pick_func(a);if(typeof u=="function")if(this.check_uniforms(a),this.is_composable(a)){let o=S((l.arguments[0]||[])[0]),f;if(a==="doodle"&&/^\d/.test(o)&&(f=o,o=S((l.arguments[1]||[])[0])),!b(o))switch(a){case"doodle":s+=this.compose_doodle(this.inject_variables(o,t.count),f);break;case"shaders":s+=this.compose_shaders(o,t);break;case"pattern":s+=this.compose_pattern(o,t);break;case"canvas":s+=this.compose_canvas(o,l.arguments.slice(1));break}}else{t.position=l.position;let o=l.arguments.map(c=>u.lazy?(...h)=>this.compose_argument(c,t,h,l):this.compose_argument(c,t,[],l)),f=this.apply_func(u,t,o);b(f)||(s+=f,f.extra&&(i=f.extra))}else s+=l.name}}return s},""),extra:i}}add_grid_style({fill:r,clip:t,rotate:i,scale:n,translate:s,flexRow:l,flexColumn:a}){r&&this.add_rule(":host",`background-color: ${r};`),t||this.add_rule(":host","contain: none;"),i&&this.add_rule(":container",`rotate: ${i};`),n&&this.add_rule(":container",`scale: ${n};`),s&&this.add_rule(":container",`translate: ${s};`),l&&(this.add_rule(":container","display: flex"),this.add_rule("cell","flex: 1")),a&&(this.add_rule(":container","display: flex; flex-direction: column;"),this.add_rule("cell","flex: 1"))}compose_rule(r,t,i){let n=Object.assign({},t),s=r.property,l;if(s==="@seed")return"";let a=r.value.reduce((c,h)=>{let m=this.compose_value(h,n);return m&&(m.value&&c.push(m.value),m.extra&&(l=m.extra)),c},[]),u=a.join(", ");if(/^animation(\-name)?$/.test(s)){if(this.props.has_animation=!0,q(i)){let c=E[s];c&&u&&(u=c+","+u)}if(n.count>1){let{count:c}=n;switch(s){case"animation-name":{u=a.map(h=>this.compose_aname(h,c)).join(", ");break}case"animation":u=a.map(h=>{let m=(h||"").split(/\s+/);return m[0]=this.compose_aname(m[0],c),m.join(" ")}).join(", ")}}}s==="content"&&(/["']|^none\s?$|^(var|counter|counters|attr|url)\(/.test(u)||(u=`'${u}'`)),s==="transition"&&(this.props.has_transition=!0);let o=`${s}: ${u};`;if(o=Lr(s,o),s==="clip-path"&&(o+=";overflow: hidden;"),(s==="width"||s==="height")&&(tt(i)||(o+=`--internal-cell-${s}: ${u};`)),/^(background|background\-image)$/.test(s)&&/\$\{(canvas|shader|pattern)/.test(u)&&(o+="background-size: 100% 100%;"),/^\-\-/.test(s)){let c=t.count;Ce(i)&&(c="container"),q(i)&&(c="host"),this.custom_properties[c]||(this.custom_properties[c]={}),this.custom_properties[c][s]=u}if(/^@/.test(s)&&Te[s.substr(1)]){let c=s.substr(1),h=Te[c](u,{is_special_selector:tt(i),grid:n.grid,max_grid:n.max_grid,extra:l});switch(c){case"grid":{q(i)?(o=h.size||"",this.add_grid_style(h)):(o="",this.is_grid_defined||(h=Te[c](u,{is_special_selector:!0,grid:n.grid,max_grid:n.max_grid}),this.add_rule(":host",h.size||""),this.add_grid_style(h))),this.grid=n.grid,this.is_grid_defined=!0;break}case"gap":{o="",this.is_gap_defined||(this.add_rule(":container",`gap: ${h};`),this.is_gap_defined=!0);break}case"content":o="",h!==void 0&&!Dn(i)&&!Ce(i)&&(this.content[this.compose_selector(n)]=qn(String(h)));case"seed":{o="";break}case"place-cell":case"place":case"position":case"offset":{q(i)||(o=h);break}case"use":{r.value.length&&this.compose(n,r.value),o="";break}default:o=h}}return o}get_raw_value(r){let t=r.raw();b(t)&&(t="");let[i,...n]=t.split(r.property);return n=n.join(r.property).replace(/^\s*:\s*/,"").replace(/[;}<]$/,"").trim().replace(/[;}<]$/,""),n}pre_compose_rule(r,t){let i=Object.assign({},t),n=r.property;switch(n){case"@grid":{let l=r.value.reduce((o,f)=>{let c=this.compose_value(f,i);return c&&c.value&&o.push(c.value),o},[]).join(", "),a=n.substr(1),u=Te[a](l,{max_grid:t.max_grid});this.grid=u.grid;break}case"@use":{r.value.length&&this.pre_compose(i,r.value);break}}}pre_compose(r,t){b(this.seed)&&((t||this.tokens).forEach(i=>{if(i.type==="rule"&&i.property==="@seed"&&(this.seed=this.get_raw_value(i)),i.type==="pseudo"&&q(i.selector))for(let n of be(i.styles))n.type==="rule"&&n.property==="@seed"&&(this.seed=this.get_raw_value(n))}),b(this.seed)||r.update_random(this.seed)),(t||this.tokens).forEach(i=>{switch(i.type){case"rule":{this.pre_compose_rule(i,r);break}case"pseudo":{q(i.selector)&&(i.styles||[]).forEach(n=>{this.pre_compose_rule(n,r)});break}}})}compose(r,t,i){this.coords.push(r),(t||this.tokens).forEach((n,s)=>{if(n.skip||i&&this.grid)return!1;switch(n.type){case"rule":{this.add_rule(this.compose_selector(r),this.compose_rule(n,r));break}case"pseudo":{n.selector.startsWith(":doodle")&&(n.selector=n.selector.replace(/^\:+doodle/,":host"));let l=tt(n.selector);l&&(n.skip=!0),n.selector.split(",").forEach(a=>{let u=n.styles.map(f=>this.compose_rule(f,r,a)),o=l?a:this.compose_selector(r,a);this.add_rule(o,u)});break}case"cond":{let l=Ln[n.name.substr(1)];if(l){let a=n.arguments.map(o=>this.compose_argument(o,r));this.apply_func(l,r,a)&&this.compose(r,n.styles)}break}case"keyframes":this.keyframes[n.name]||(this.keyframes[n.name]=l=>`
              ${xe(n.steps.map(a=>`
                ${a.name} {
                  ${xe(a.styles.map(u=>this.compose_rule(u,l)))}
                }
              `))}
            `)}})}output(){for(let[r,t]of Object.entries(this.rules))if(Ce(r))this.styles.container+=`
          .container {
            ${xe(t)}
          }
        `;else{let i=q(r)?"host":"cells",n=xe(t).trim(),s=i==="host"?`${r}, .host`:r;this.styles[i]+=`${s} { ${n} }`}return this.uniforms.time&&(this.styles.container+=`
        :host, .host {
          animation: ${E.animation};
        }
      `,this.styles.keyframes+=`
       @keyframes ${E["animation-name"]} {
         from { --${E.name}: 0 }
         to { --${E.name}: ${E["animation-duration"]/10} }
       }
      `),this.coords.forEach((r,t)=>{for(let[i,n]of Object.entries(this.keyframes)){let s=this.compose_aname(i,r.count);this.styles.keyframes+=`
          ${_i(t===0,`@keyframes ${i} { ${n(r)} }`)}
          @keyframes ${s} {
            ${n(r)}
          }
        `}}),{props:this.props,styles:this.styles,grid:this.grid,seed:this.seed,random:this.random,doodles:this.doodles,shaders:this.shaders,canvas:this.canvas,pattern:this.pattern,uniforms:this.uniforms,content:this.content}}}function qn(e){return e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.substring(1,e.length-1):e}function Vt(e,r,t,i,n){let s=new Un(e),l=n||Ee(String(t)),a={};function u(p){l=Ee(String(p))}function o(p=0,d){return arguments.length==1&&([p,d]=[0,p]),I(l(),p,d)}function f(...p){let d=p.reduce((_,y)=>_.concat(y),[]);return d[~~(l()*d.length)]}function c(p){let d=[...p],_=p.length;for(;_;){let y=~~(l()*_--),g=d[_];d[_]=d[y],d[y]=g}return d}s.pre_compose({x:1,y:1,z:1,count:1,context:{},grid:{x:1,y:1,z:1,count:1},random:l,rand:o,pick:f,shuffle:c,max_grid:i,update_random:u,seed_value:t});let{grid:h,seed:m}=s.output();if(h&&(r=h),m?(m=String(m),l=Ee(m)):m=t,b(m)&&(m=Date.now(),l=Ee(m)),m=String(m),s.seed=m,s.random=l,s.reset(),r.z==1)for(let p=1,d=0;p<=r.y;++p)for(let _=1;_<=r.x;++_)s.compose({x:_,y:p,z:1,count:++d,grid:r,context:a,rand:o,pick:f,shuffle:c,random:l,seed:m,max_grid:i});else for(let p=1,d=0;p<=r.z;++p)s.compose({x:1,y:1,z:p,count:++d,grid:r,context:a,rand:o,pick:f,shuffle:c,random:l,seed:m,max_grid:i});return s.output()}function Zt(e,r,t){let i=e.createShader(r);return e.shaderSource(i,t),e.compileShader(i),i}function Fn(e,r,t){let i=Zt(e,e.VERTEX_SHADER,r),n=Zt(e,e.FRAGMENT_SHADER,t),s=e.createProgram();return e.attachShader(s,i),e.attachShader(s,n),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||(console.warn("Link failed: "+e.getProgramInfoLog(s)),console.warn("vs info-log: "+e.getShaderInfoLog(i)),console.warn("fs info-log: "+e.getShaderInfoLog(n))),s}function V(e,r){return e.includes(r)?e:r+`
`+e}const Hn=`#version 300 es
  precision highp float;
  out vec4 FragColor;
`,Xn=`#version 300 es
  in vec4 position;
  void main() {
    gl_Position = position;
  }
`;function Vn(e,r,t){const i=e.createTexture();e.activeTexture(e["TEXTURE"+t]),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)}function Gt(e,r,t,i){let n=F.get(e);if(n)return Promise.resolve(n);let s=document.createElement("canvas"),l=window.devicePixelRatio||1;r*=l,t*=l,s.width=r,s.height=t;let a=s.getContext("webgl2",{preserveDrawingBuffer:!0});if(!a)return Promise.resolve("");let u=V(e.fragment||"","uniform vec2 u_resolution;");u=V(u,"uniform float u_time;"),u=V(u,"uniform float u_timeDelta;"),u=V(u,"uniform int u_frameIndex;"),u=V(u,"uniform vec2 u_seed;"),e.textures.forEach(x=>{let $=`uniform sampler2D ${x.name};`;u=V(u,$)}),/(^|[^\w\_])void\s+mainImage\(\s*out\s+vec4\s+fragColor,\s*in\s+vec2\s+fragCoord\s*\)/mg.test(u)&&(u=`// https://www.shadertoy.com/howto

#define iResolution vec3(u_resolution, 0)
#define iTime u_time
#define iTimeDelta u_timeDelta
#define iFrame u_frameIndex

${e.textures.map((x,$)=>`#define iChannel${$} ${x.name}`).join(`
`)}

${u}

void main() {
  mainImage(FragColor, gl_FragCoord.xy);
}`);let f=Fn(a,e.vertex||Xn,Hn+u),c=a.getAttribLocation(f,"position"),h=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,h);let m=[-1,-1,-1,1,1,-1,1,1,-1,1,1,-1];a.bufferData(a.ARRAY_BUFFER,new Float32Array(m),a.STATIC_DRAW),a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),a.useProgram(f);const p=a.getUniformLocation(f,"u_resolution");a.uniform2fv(p,[r,t]),e.textures.forEach((x,$)=>{Vn(a,x.value,$),a.uniform1i(a.getUniformLocation(f,x.name),$)});const d=a.getUniformLocation(f,"u_seed");d&&a.uniform2f(d,ut(i)/1e16,Math.random());const _=a.getUniformLocation(f,"u_time"),y=a.getUniformLocation(f,"u_frameIndex"),g=a.getUniformLocation(f,"u_timeDelta");if(_||g||y){let x=0,$=0;return Promise.resolve(F.set(e,T=>(a.clear(a.COLOR_BUFFER_BIT),_&&a.uniform1f(_,T/1e3),y&&a.uniform1i(y,x++),g&&(a.uniform1f(g,($-T)/1e3),$=T),a.drawArrays(a.TRIANGLES,0,6),s.toDataURL())))}else return a.drawArrays(a.TRIANGLES,0,6),Promise.resolve(F.set(e,s.toDataURL()))}function Zn(e,r){let t=[];for(;e.next();){let{curr:i,next:n}=e.get(),s=!n||i.isSymbol(";")||n.isSymbol("}");if(t.push(i),s)break}return t.length&&(r.value=yt(t)),r}function Br(e,r){let t=[],i=[],n=r&&r.type||"",s=[];for(;e.next();){let{prev:l,curr:a,next:u}=e.get(),o=!u||a.isSymbol("}");if(n==="block"&&o){!u&&t.length&&!a.isSymbol("}")&&(t[t.length-1].value+=";"+a.value),r.value=t;break}else if(a.isSymbol("{")&&i.length&&!s.length){let f=Gn(i);if(!f.length)continue;let c=Br(e,{type:"block",name:"unkown",value:[]});f.forEach(h=>{let m=Object.assign({},c,{name:h.name,args:h.args});t.push(m)}),i=[]}else if(a.isSymbol(":")&&i.length&&!s.length){let f=yt(i);t.push(Zn(e,{type:"statement",name:f,value:""})),n=="block"&&(r.value=t),i=[]}else a.isSymbol(";")?t.length&&i.length&&(t[t.length-1].value+=";"+yt(i),i=[]):(a.isSymbol("(")&&s.push(a),a.isSymbol(")")&&s.pop(),i.push(a))}return t.length&&n=="block"&&(r.value=t),n?r:t}function yt(e){return e.filter((r,t)=>!(r.isSymbol(";")&&t===e.length-1)).map(r=>r.value).join("")}function Gn(e){let r=L(e),t=[],i="",n=[],s=[],l=[];for(;r.next();){let{curr:a,next:u}=r.get();!i.length&&a.isWord()?i=a.value:a.isSymbol("(")?(l.length&&s.push(a.value),l.push(a)):a.isSymbol(")")?(l.pop(),l.length?s.push(a.value):s.length&&(n.push(s.join("")),s=[])):a.isSymbol(",")?l.length?(n.push(s.join("")),s=[]):(s.length&&(n.push(s.join("")),s=[]),i&&(t.push({name:i,args:n}),i="",n=[],s=[])):s.push(a.value)}return i&&t.push({name:i,args:n}),t.filter((a,u,o)=>o.findIndex(c=>c.name===a.name&&a.args.join("")==c.args.join(""))===u)}function Yn(e){let r=L(B(e));return Br(r)}function Kn(e,r){return`
    vec3 mapping(vec2 uv, vec2 grid) {
      vec2 _grid = 1.0/grid;
      float x = ceil(uv.x/_grid.x);
      float y = ceil(grid.y - uv.y/_grid.y);
      float i = x + (y - 1.0) * y;
      return vec3(x, y, i);
    }
    vec4 getColor(float x, float y, float i, float I, float X, float Y, float t) {
      vec4 color = vec4(0, 0, 0, 0);
      ${e}
      return color;
    }
    void main() {
      vec2 uv = gl_FragCoord.xy/u_resolution.xy;
      vec2 grid = vec2(${r.x}, ${r.y});
      vec3 p = mapping(uv, grid);
      FragColor = getColor(p.x, p.y, p.z, grid.x * grid.y, grid.x, grid.y, u_time);
    }
  `}function Wr(e,r){if(e.name==="fill"){let{r:t,g:i,b:n,a:s}=r.get_rgba_color(e.value);return{type:"statement",value:`
color = vec4(${Ae(t/255)}, ${Ae(i/255)}, ${Ae(n/255)}, ${Ae(s)});
`}}return e.name=="grid"?{type:"grid",value:e.value}:{type:"statement",value:""}}function Jn(e,r){if(e.name==="match"){let t=e.args[0],i=[];return e.value.forEach(n=>{let s=Wr(n,r);s.type=="statement"&&i.push(s.value)}),`
      if (${t}) {
        ${i.join("")}
      }
    `}return""}function Ae(e){return String(e).includes(".")?e:e+".0"}function Qn(e,r){let t=Yn(e),i=[],n={x:1,y:1};return t.forEach(s=>{if(s.type==="statement"){let l=Wr(s,r);l.type=="statement"&&i.push(l.value),l.type==="grid"&&(n=hr(l.value))}else s.type==="block"&&i.push(Jn(s,r))}),Kn(i.join(""),n)}const es=cr();function ts(e){let r=F.get(e);if(r)return Promise.resolve(r);let t=es("css-doodle-paint"),i=rs(t,e),n=new Blob([i],{type:"text/javascript"});try{CSS.paintWorklet&&CSS.paintWorklet.addModule(URL.createObjectURL(n))}catch{}return Promise.resolve(F.set(e,`paint(${t})`))}function rs(e,r){return r=at(r),r.includes("paint(")||(r=`
      paint(ctx, {width, height}, props) {
        ${r}
      }
    `),`
    registerPaint('${e}', class {
      ${r}
    })
  `}function is(e,r,t,i){return new Promise((n,s)=>{let l=`data:image/svg+xml;utf8,${encodeURIComponent(e)}`;function a(){let u=new Image;u.crossOrigin="anonymous",u.src=l,u.onload=()=>{let o=document.createElement("canvas"),f=o.getContext("2d"),c=window.devicePixelRatio||1;i!=1&&(c=1),o.width=r*c,o.height=t*c,f.drawImage(u,0,0,o.width,o.height);try{o.toBlob(h=>{n({blob:h,source:l,url:URL.createObjectURL(h)})})}catch(h){s(h)}}}lt()?fr(l,a,200):a()})}function ns(e){if(typeof getComputedStyle>"u")return"";let r={};if(e.computedStyleMap)for(let[t,i]of e.computedStyleMap())t.startsWith("--")&&(r[t]=i[0][0]);else{let t=getComputedStyle(e);for(let i of t)i.startsWith("--")&&(r[i]=t.getPropertyValue(i))}return ls(r)}function ss(e,r){return typeof getComputedStyle>"u"?"":getComputedStyle(e).getPropertyValue(r).trim().replace(/^\(|\)$/g,"")}function ls(e){let r=[];for(let[t,i]of Object.entries(e))r.push(t+":"+i);return r.join(";")}function as(e){let[r,t,i,n=1]=e.replace(/rgba?\((.+)\)/,(s,l)=>l).split(/,\s*/);return{r,g:t,b:i,a:n}}function us(e,r){let t=e.querySelector("#defs");return t?(t.style.color=r,as(getComputedStyle(t).color)):{r:0,g:0,b:0,a:1}}const Yt=1e3/60,Kt=1e3/1;function os(e){let r,t=0,i=0,n=0,s=!1;function l(a){t||(t=a),e(t);let u=a-i;u<Yt&&(u=Yt),u>Kt&&(u=n||Kt),i&&(t+=u),n=u,i=a,r=requestAnimationFrame(l)}return r=requestAnimationFrame(l),{resume(){r&&s&&(s=!1,r=requestAnimationFrame(l))},pause(){r&&(cancelAnimationFrame(r),s=!0)},cancel(){r&&(s=!1,cancelAnimationFrame(r),r=null)}}}if(typeof customElements<"u"){class e extends HTMLElement{constructor(){super(),this.doodle=this.attachShadow({mode:"open"}),this.animations=[],this.extra={get_variable:t=>ss(this,t),get_rgba_color:t=>us(this.shadowRoot,t)}}connectedCallback(t){this.innerHTML?this.load(t):setTimeout(()=>this.load(t))}disconnectedCallback(){this.cleanup()}cleanup(){F.clear();for(let t of this.animations)t.cancel();this.animations=[]}update(t){this.cleanup(),t||(t=at(this._innerHTML)),this._innerHTML!==t&&(this._innerHTML=t),this.grid_size||(this.grid_size=this.get_grid());const{x:i,y:n,z:s}=this.grid_size,l=this.get_use();let a="";this.compiled&&(a=this.compiled.content);const u=this.generate(se(l+t,this.extra));let o=u.grid||this.get_grid(),{x:f,y:c,z:h}=o,m=!this.shadowRoot.innerHTML||i!==f||n!==c||s!==h||JSON.stringify(a)!==JSON.stringify(u.content);if(Object.assign(this.grid_size,o),m)return u.grid?this.build_grid(u,o):this.build_grid(this.generate(se(l+t,this.extra)),o);let p=this.replace(u);this.set_content(".style-keyframes",p(u.styles.keyframes)),u.props.has_animation&&(this.set_content(".style-cells",""),this.set_content(".style-container","")),setTimeout(()=>{this.set_content(".style-container",p(rt(this.grid_size)+u.styles.host+u.styles.container)),this.set_content(".style-cells",p(u.styles.cells))})}get grid(){return Object.assign({},this.grid_size)}set grid(t){this.attr("grid",t),this.connectedCallback(!0)}get seed(){return this._seed_value}set seed(t){this.attr("seed",t),this.connectedCallback(!0)}get use(){return this.attr("use")}set use(t){this.attr("use",t),this.connectedCallback(!0)}get_max_grid(){return this.hasAttribute("experimental")?256:64}get_grid(){return ht(this.attr("grid"),this.get_max_grid())}get_use(){let t=String(this.attr("use")||"").trim();return/^var\(/.test(t)&&(t=`@use:${t};`),t}attr(t,i){if(arguments.length===1)return this.getAttribute(t);if(arguments.length===2)return this.setAttribute(t,i),i}generate(t){let i=this.get_grid(),n=this.attr("seed")||this.attr("data-seed");b(n)&&(n=Date.now());let s=this.compiled=Vt(t,i,n,this.get_max_grid());return this._seed_value=s.seed,this._seed_random=s.random,s}doodle_to_image(t,i,n){typeof i=="function"&&(n=i,i=null),t=":doodle { width:100%;height:100% }"+t;let s=se(t,this.extra),l=ht(""),a=Vt(s,l,this._seed_value,this.get_max_grid(),this._seed_random),u=a.grid?a.grid:l;const{keyframes:o,host:f,container:c,cells:h}=a.styles;let m="";if(i&&i.arg){let y=hr(i.arg);y.x&&y.y&&(m=`viewBox="0 0 ${y.x} ${y.y}"`)}let p=this.replace(a),d=tr(u,a.content),_=i&&i.width&&i.height?`width="${i.width}" height="${i.height}"`:"";p(`
        <svg ${_} xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" ${m}>
          <foreignObject width="100%" height="100%">
            <div class="host" width="100%" height="100%" xmlns="http://www.w3.org/1999/xhtml">
              <style>
                ${Jt()}
                ${rt(u)}
                ${f}
                ${c}
                ${h}
                ${o}
              </style>
              <svg id="defs" xmlns="http://www.w3.org/2000/svg" style="width:0; height:0"></svg>
              ${d}
            </div>
          </foreignObject>
        </svg>
      `).then(y=>{let g=`data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(y)))}`;lt()&&fr(g),n(g)})}pattern_to_image({code:t,cell:i,id:n},s){let l=Qn(t,this.extra);this.shader_to_image({shader:l,cell:i,id:n},s)}canvas_to_image({code:t},i){ts(t).then(i)}pause(){this.setAttribute("cssd-paused-animation",!0);for(let t of this.animations)t.pause()}resume(){this.removeAttribute("cssd-paused-animation");for(let t of this.animations)t.resume()}shader_to_image({shader:t,cell:i,id:n},s){let l=typeof t=="string"?Gi(t):t,a=this.doodle.getElementById(i);const u=this.seed,o=p=>{a.style.setProperty(n,`url(${p})`)},f=p=>{if(typeof p=="function"){let d=os(_=>{o(p(_))});return this.animations.push(d),""}o(p)};let{width:c,height:h}=a&&a.getBoundingClientRect()||{width:0,height:0},m=window.devicePixelRatio||1;if(!l.textures.length||l.ticker)Gt(l,c,h,u).then(f).then(s);else{let p=l.textures.map(d=>new Promise(_=>{this.doodle_to_image(d.value,{width:c,height:h},y=>{let g=new Image;g.width=c*m,g.height=h*m,g.onload=()=>_({name:d.name,value:g}),g.src=y})}));Promise.all(p).then(d=>{l.textures=d,Gt(l,c,h,u).then(f).then(s)})}}load(t){this.cleanup();let i=this.get_use(),n=se(i+at(this.innerHTML),this.extra),s=this.generate(n);t||this.hasAttribute("click-to-update")&&this.addEventListener("click",l=>this.update()),this.grid_size=s.grid?s.grid:this.get_grid(),this.build_grid(s,this.grid_size),this._innerHTML=this.innerHTML,this.innerHTML=""}replace({doodles:t,shaders:i,canvas:n,pattern:s}){let l=Object.keys(t),a=Object.keys(i),u=Object.keys(n),o=Object.keys(s),f=l.length+u.length+a.length+o.length;return c=>{if(!f)return Promise.resolve(c);let h=[].concat(l.map(m=>c.includes(m)?new Promise(p=>{let{arg:d,doodle:_}=t[m];this.doodle_to_image(_,{arg:d},y=>p({id:m,value:y}))}):Promise.resolve("")),a.map(m=>c.includes(m)?new Promise(p=>{this.shader_to_image(i[m],d=>p({id:m,value:d}))}):Promise.resolve("")),u.map(m=>c.includes(m)?new Promise(p=>{this.canvas_to_image(n[m],d=>p({id:m,value:d}))}):Promise.resolve("")),o.map(m=>c.includes(m)?new Promise(p=>{this.pattern_to_image(s[m],d=>p({id:m,value:d}))}):Promise.resolve("")));return Promise.all(h).then(m=>{for(let{id:p,value:d}of m){let _=`url(${d})`;/^canvas/.test(p)&&(_=d),/^shader|^pattern/.test(p)&&(_=`var(--${p})`),c=c.replaceAll("${"+p+"}",_)}return c})}}build_grid(t,i){const{has_transition:n,has_animation:s}=t.props;let l=n||s;const{keyframes:a,host:u,container:o,cells:f}=t.styles;let c=rt(i)+u+o,h=l?"":f;const{uniforms:m,content:p}=t;let d=this.replace(t);this.doodle.innerHTML=`
        <style>${Jt()}</style>
        <style class="style-keyframes">${a}</style>
        <style class="style-container">${c}</style>
        <style class="style-cells">${h}</style>
        <svg id="defs" xmlns="http://www.w3.org/2000/svg" style="width:0;height:0"></svg>
        ${tr(i,p)}
      `,this.set_content(".style-container",d(c)),l?setTimeout(()=>{this.set_content(".style-cells",d(f))},50):this.set_content(".style-cells",d(f)),m.time&&this.register_uniform_time(),m.mousex||m.mousey?this.register_uniform_mouse(m):this.remove_uniform_mouse(),m.width||m.height?this.register_uniform_resolution(m):this.remove_uniform_resolution()}register_uniform_mouse(t){if(!this.uniform_mouse_callback){let{uniform_mousex:i,uniform_mousey:n}=Z;this.uniform_mouse_callback=l=>{let a=l.detail||l;t.mousex&&this.style.setProperty("--"+i.name,a.offsetX),t.mousey&&this.style.setProperty("--"+n.name,a.offsetY)},this.addEventListener("pointermove",this.uniform_mouse_callback);let s=new CustomEvent("pointermove",{detail:{offsetX:0,offsetY:0}});this.dispatchEvent(s)}}remove_uniform_mouse(){if(this.uniform_mouse_callback){let{uniform_mousex:t,uniform_mousey:i}=Z;this.style.removeProperty("--"+t.name),this.style.removeProperty("--"+i.name),this.removeEventListener("pointermove",this.uniform_mouse_callback),this.uniform_mouse_callback=null}}register_uniform_resolution(t){if(!this.uniform_resolution_observer){let{uniform_width:i,uniform_height:n}=Z;const s=()=>{let l=this.getBoundingClientRect();t.width&&this.style.setProperty("--"+i.name,l.width),t.height&&this.style.setProperty("--"+n.name,l.height)};s(),this.uniform_resolution_observer=new ResizeObserver(l=>{for(let a of l)(a.contentBoxSize||a.contentRect)&&s()}),this.uniform_resolution_observer.observe(this)}}remove_uniform_resolution(){if(this.uniform_resolution_observer){let{uniform_width:t,uniform_height:i}=Z;this.style.removeProperty("--"+t.name),this.style.removeProperty("--"+i.name),this.uniform_resolution_observer.unobserve(this),this.uniform_resolution_observer=null}}register_uniform_time(){if(!window.CSS||!window.CSS.registerProperty)return!1;if(!this.is_uniform_time_registered){let{uniform_time:t}=Z;try{CSS.registerProperty({name:"--"+t.name,syntax:"<number>",initialValue:0,inherits:!0})}catch{}this.is_uniform_time_registered=!0}}export({scale:t,name:i,download:n,detail:s}={}){return new Promise((l,a)=>{let u=ns(this),o=this.doodle.innerHTML,{width:f,height:c}=this.getBoundingClientRect();t=parseInt(t)||1;let h=f*t,m=c*t,p=`
          <svg xmlns="http://www.w3.org/2000/svg"
            preserveAspectRatio="none"
            viewBox="0 0 ${f} ${c}"
            ${lt()?"":`width="${h}px" height="${m}px"`}
          >
            <foreignObject width="100%" height="100%">
              <div
                class="host"
                xmlns="http://www.w3.org/1999/xhtml"
                style="width: ${f}px; height: ${c}px; "
              >
                <style>.host { ${xi(u)} }</style>
                ${o}
              </div>
            </foreignObject>
          </svg>
        `;n||s?is(p,h,m,t).then(({source:d,url:_,blob:y})=>{if(l({width:h,height:m,svg:p,blob:y,source:d}),n){let g=document.createElement("a");g.download=bi(i),g.href=_,g.click()}}).catch(d=>{a(d)}):l({width:h,height:m,svg:p})})}set_content(t,i){if(i instanceof Promise)i.then(n=>{this.set_content(t,n)});else{const n=this.shadowRoot.querySelector(t);n&&(n.styleSheet?n.styleSheet.cssText=i:n.innerHTML=i)}}}customElements.get("css-doodle")||customElements.define("css-doodle",e)}function Jt(){let{uniform_time:e}=Z;const r=Rr(/grid/).map(t=>`${t}: inherit;`).join("");return`
    *, *::after, *::before {
      box-sizing: border-box;
    }
    :host, .host {
      display: block;
      visibility: visible;
      width: auto;
      height: auto;
      contain: content;
      box-sizing: border-box;
      --${e.name}: 0
    }
    :host([hidden]), .host[hidden] {
      display: none
    }
    .container {
      position: relative;
      width: 100%;
      height: 100%;
      display: grid;
      ${r}
    }
    cell {
      position: relative;
      display: grid;
      place-items: center
    }
    svg {
      position: absolute;
      width: 100%;
      height: 100%
    }
    :host([cssd-paused-animation]),
    :host([cssd-paused-animation]) * {
      animation-play-state: paused !important
    }
  `}function rt(e){let{x:r,y:t}=e||{};return`
    :host, .host {
      grid-template-rows: repeat(${t}, 1fr);
      grid-template-columns: repeat(${r}, 1fr);
    }
  `}function Qt(e){return b(e)?"":e}function er(e,r,t,i,n=""){let s=ue(e,r,t),l=Qt(i["#"+s]),a=Qt(n);return`<cell id="${s}">${l}${a}</cell>`}function tr(e,r){let{x:t,y:i,z:n}=e||{},s="";if(n==1)for(let l=1;l<=i;++l)for(let a=1;a<=t;++a)s+=er(a,l,1,r);else{let l="";for(let a=n;a>=1;a--)l=er(1,1,a,r,l);s=l}return`<grid class="container">${s}</grid>`}const{document:it}=Xr;function fs(e){let r,t,i,n;return{c(){r=fe("script"),i=fe("script"),n=lr(`window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag("js", new Date());
    gtag("config", "G-KL11ZHZSTB");`),this.h()},l(s){const l=qr("svelte-ip12h6",it.head);r=ce(l,"SCRIPT",{src:!0});var a=he(r);a.forEach(N),i=ce(l,"SCRIPT",{});var u=he(i);n=ar(u,`window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag("js", new Date());
    gtag("config", "G-KL11ZHZSTB");`),u.forEach(N),l.forEach(N),this.h()},h(){r.async=!0,Fr(r.src,t="https://www.googletagmanager.com/gtag/js?id=G-KL11ZHZSTB")||Le(r,"src",t)},m(s,l){le(it.head,r),le(it.head,i),le(i,n)},p:Ne,i:Ne,o:Ne,d(s){N(r),N(i)}}}function cs(e,r,t){let i;return Hr(e,ai,n=>t(0,i=n)),e.$$.update=()=>{e.$$.dirty&1&&typeof gtag<"u"&&gtag("config","G-KL11ZHZSTB",{page_title:document.title,page_path:i.url.pathname})},[i]}class hs extends nr{constructor(r){super(),sr(this,r,cs,fs,vt,{})}}function rr(e,{delay:r=0,duration:t=400,easing:i=Vr}={}){const n=+getComputedStyle(e).opacity;return{delay:r,duration:t,easing:i,css:s=>`opacity: ${s*n}`}}function ir(e){let r,t,i,n,s,l;t=new hs({});const a=e[2].default,u=Gr(a,e,e[1],null);return{c(){r=fe("div"),Yr(t.$$.fragment),i=nt(),u&&u.c(),this.h()},l(o){r=ce(o,"DIV",{class:!0});var f=he(r);Kr(t.$$.fragment,f),i=st(f),u&&u.l(f),f.forEach(N),this.h()},h(){Le(r,"class","w-full h-full min-h-[100vh]")},m(o,f){te(o,r,f),Jr(t,r,null),le(r,i),u&&u.m(r,null),l=!0},p(o,f){u&&u.p&&(!l||f&2)&&Qr(u,a,o,o[1],l?ti(a,o[1],f,null):ei(o[1]),null)},i(o){l||(ze(t.$$.fragment,o),ze(u,o),ri(()=>{l&&(s&&s.end(1),n=ii(r,rr,{duration:150,delay:150}),n.start())}),l=!0)},o(o){Me(t.$$.fragment,o),Me(u,o),n&&n.invalidate(),s=ni(r,rr,{duration:150}),l=!1},d(o){o&&N(r),si(t),u&&u.d(o),o&&s&&s.end()}}}function ms(e){let r,t,i=e[0].currentRoute,n,s,l,a,u=ir(e);return{c(){r=fe("div"),t=nt(),u.c(),n=nt(),s=fe("footer"),l=lr(`This website is made of love, and shoulder pain as well as endless support
    from Svelte community.`),this.h()},l(o){r=ce(o,"DIV",{class:!0});var f=he(r);f.forEach(N),t=st(o),u.l(o),n=st(o),s=ce(o,"FOOTER",{class:!0});var c=he(s);l=ar(c,`This website is made of love, and shoulder pain as well as endless support
    from Svelte community.`),c.forEach(N),this.h()},h(){Le(r,"class","absolute h-full w-full flex items-start justify-center overflow-hidden z-[-1] pointer-events-none"),Le(s,"class","flex items-center justify-center mt-[120px] z-[-1]")},m(o,f){te(o,r,f),te(o,t,f),u.m(o,f),te(o,n,f),te(o,s,f),le(s,l),a=!0},p(o,[f]){f&1&&vt(i,i=o[0].currentRoute)?(li(),Me(u,1,1,Ne),Zr(),u=ir(o),u.c(),ze(u,1),u.m(n.parentNode,n)):u.p(o,f)},i(o){a||(ze(u),a=!0)},o(o){Me(u),a=!1},d(o){o&&N(r),o&&N(t),u.d(o),o&&N(n),o&&N(s)}}}function ps(e,r,t){let{$$slots:i={},$$scope:n}=r,{data:s}=r;return e.$$set=l=>{"data"in l&&t(0,s=l.data),"$$scope"in l&&t(1,n=l.$$scope)},[s,n,i]}class vs extends nr{constructor(r){super(),sr(this,r,ps,ms,vt,{data:0})}}export{vs as component,ys as universal};
